<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="../js/documentation.js" type="application/javascript"></script>
	<link href="../css/light.css" rel="stylesheet">
	<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<style>
		#pageTitle::before {
			content: "Troubleshooting T7 Cameras";
		} 
	</style>
	<link href="../css/documentation.css" rel="stylesheet">
	<link href="../documentation-favicon.ico" rel="shortcut icon" type="image/png">
	<title>T7 Cameras</title>
</head>
<body>
<div w3-include-html="/documentation/pageHeader.html" id="pageHeader"></div>
<div class="Layout">
<div class="Layout-sidebar" w3-include-html="/documentation/sidebar.html" id="sidebar"></div>
<div class="Layout-main markdown-body" id="mainContents">

<p>
The T7 camera is an OEM version of the ZWO ASI120 and
<b>isn't officially supported in Allsky</b>
because it does not work out of the box.
If you do decide to try this camera, you do so at your own risk.
</p>
<p>
We do not know if the camera has a fail-safe boot loader that will prevent
the camera from being bricked if a firmware update fails.
ZWO states that updating the firmware may result in reduced camera performance.
As with all firmware updates,
this may damage your camera. Once again, use this camera at your own risk.
</p>
<p>
The stock firmware uses invalid 1024-byte packets, rather than 512-byte.
Plugging in this camera will result in kernel logs similar to this:
<pre>
usb 3-2: new high-speed USB device number 62 using xhci_hcd
usb 3-2: config 1 interface 0 altsetting 0 bulk endpoint 0x82 has invalid maxpacket 1024
usb 3-2: New USB device found, idVendor=03c3, idProduct=120b, bcdDevice= 0.00
usb 3-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3
usb 3-2: Product: ASI120MC
usb 3-2: Manufacturer: ZWOptical company  
usb 3-2: SerialNumber: 00000
</pre>
</p>
<p>
You should now be experiencing some feelings of regret for buying this camera.
Any attempt to actually use the camera will fail,
likely producing kernel messages similar to:
<pre>
usb 3-2: reset high-speed USB device number 62 using xhci_hcd
usb usb3-port2: disabled by hub (EMI?), re-enabling...
</pre>
</p>
<p>
While we cannot help with the buyer's remorse, the USB errors can be remedied using
<a href="https://astronomy-imaging-camera.com/software-drivers">ZWO's compatible firmware</a>.
Without this firmware the camera will not work on Linux. Unfortunately,
the firmware updater must be run from Windows in order to update USB 2 cameras.
ZWO support confirms that it does not work on MacOS or Linux.
Additionally, the firmware update requires you to install a specific version of MSVCRT,
and also the ZWO driver package (this is not obvious on the firmware page).
</p>
<p>
If you do not have Windows, you can get a legitimate developer VM image from
Microsoft which may work well enough to re-flash the camera.
Use your favorite search engine to find a "Microsoft windows developer vm image".
Then look for instructions on enabling "USB pass-through" for your virtualization platform.
Note that USB pass-through to VMs has been the source of issues in many different projects,
e.g., anything that does DSP, timing-critical operations, or device reprogramming.
</p>
<p>
It may be necessary to append <code>program_usb_boot_mode=0</code> to
<span class="fileName">/boot/config.txt</span> to make this camera work.
As this changes some one-time-programmable EPROM - permanently altering your
Raspberry Pi - do not set this unless absolutely necessary
(and we don't know why it would be necessary).
</p>


</div><!-- Layout-main -->
</div><!-- Layout -->
</body>
</html>
<script> includeHTML(); </script>

