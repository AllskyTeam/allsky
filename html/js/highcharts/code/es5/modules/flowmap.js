!/**
 * Highcharts JS v12.1.2 (2025-01-09)
 * @module highcharts/modules/flowmap
 * @requires highcharts
 *
 * (c) 2009-2024
 *
 * License: www.highcharts.com/license
 */function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("highcharts"),require("highcharts").SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/modules/flowmap",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"]],o):"object"==typeof exports?exports["highcharts/modules/flowmap"]=o(require("highcharts"),require("highcharts").SeriesRegistry):t.Highcharts=o(t.Highcharts,t.Highcharts.SeriesRegistry)}(this,function(t,o){return function(){"use strict";var r,i,e={512:function(t){t.exports=o},944:function(o){o.exports=t}},n={};function s(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,s),r.exports}s.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(o,{a:o}),o},s.d=function(t,o){for(var r in o)s.o(o,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},s.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)};var a={};s.d(a,{default:function(){return z}});var p=s(944),h=s.n(p),c=s(512),l=s.n(c),f=(r=function(t,o){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])})(t,o)},function(t,o){function i(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),u=l().seriesTypes.mapline.prototype.pointClass,y=h().pick,g=h().isString,d=h().isNumber,m=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return f(o,t),o.prototype.isValid=function(){var t=!!(this.options.to&&this.options.from);return[this.options.to,this.options.from].forEach(function(o){t=!!(t&&o&&(g(o)||d(y(o[0],o.lat))&&d(y(o[1],o.lon))))}),t},o}(u),v=(i=function(t,o){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),x=function(t,o,r){if(r||2==arguments.length)for(var i,e=0,n=o.length;e<n;e++)!i&&e in o||(i||(i=Array.prototype.slice.call(o,0,e)),i[e]=o[e]);return t.concat(i||Array.prototype.slice.call(o))},w=l().series.prototype.pointClass,P=l().seriesTypes,b=P.column,O=P.map,_=P.mapline,A=h().addEvent,L=h().arrayMax,W=h().arrayMin,k=h().defined,j=h().extend,M=h().isArray,C=h().merge,E=h().pick,T=h().relativeLength,S=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return v(o,t),o.getLength=function(t,o){return Math.sqrt(t*t+o*o)},o.normalize=function(t,o){var r=this.getLength(t,o);return[t/r,o/r]},o.markerEndPath=function(t,o,r,i){var e=T(i.width||0,this.getLength(o[0]-t[0],o[1]-t[1])),n=i.markerType||"arrow",s=this.normalize(o[0]-t[0],o[1]-t[1]),a=s[0],p=s[1],h=[];if("arrow"===n){var c=t[0],l=t[1];c-=a*e,l-=p*e,h.push(["L",c,l]),h.push(["L",r[0],r[1]]),c=o[0],l=o[1],c+=a*e,l+=p*e,h.push(["L",c,l])}if("mushroom"===n){var f=t[0],u=t[1],y=o[0],g=o[1],d=r[0],m=r[1],v=(y-f)/2+f,x=(g-u)/2+u;f-=a*e,u-=p*e,h.push(["L",f,u]),y+=a*e,g+=p*e,h.push(["Q",(d-v)*2+v,(m-x)*2+x,y,g])}return h},o.prototype.animate=function(t){var o=this.points;t||o.forEach(function(t){if(t.shapeArgs&&M(t.shapeArgs.d)&&t.shapeArgs.d.length){var o=t.shapeArgs.d,r=o[0][1],i=o[0][2];if(r&&i){for(var e=[],n=0;n<o.length;n++){e.push(x([],o[n],!0));for(var s=1;s<o[n].length;s++)e[n][s]=s%2?r:i}t.graphic&&(t.graphic.attr({d:e}),t.graphic.animate({d:o}))}}})},o.prototype.getLinkWidth=function(t){var o=this.options.width,r=t.options.weight||this.options.weight;if(t.options.weight=r,o&&!r)return o;var i=this.smallestWeight,e=this.greatestWeight;if(!k(r)||!i||!e)return 0;var n=this.options.minWidth;return(r-i)*(this.options.maxWidth-n)/(e-i||1)+n},o.prototype.autoCurve=function(t,o,r,i,e,n){var s={x:r-t,y:i-o},a={x:(r-t)/2+t,y:(i-o)/2+o},p={x:a.x-e,y:a.y-n},h=s.x*p.x+s.y*p.y,c=Math.atan2(s.x*p.y-s.y*p.x,h),l=180*c/Math.PI;return l<0&&(l=360+l),-(.7*Math.sin(c=l*Math.PI/180))},o.prototype.pointAttribs=function(t,o){var r=O.prototype.pointAttribs.call(this,t,o);return r.fill=E(t.options.fillColor,t.options.color,"none"===this.options.fillColor?null:this.options.fillColor,this.color),r["fill-opacity"]=E(t.options.fillOpacity,this.options.fillOpacity),r["stroke-width"]=E(t.options.lineWidth,this.options.lineWidth,1),t.options.opacity&&(r.opacity=t.options.opacity),r},o.prototype.translate=function(){var t=this;this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints());var o=[],r=0,i=0;this.points.forEach(function(e){var n,s,a=t.chart,p=a.mapView,h=e.options,c=function(){e.series.isDirty=!0},l=function(t){var o=a.get(t);if(o instanceof w&&o.plotX&&o.plotY)return A(o,"update",c),{x:o.plotX,y:o.plotY}},f=function(t){return M(t)?{lon:t[0],lat:t[1]}:t};"string"==typeof h.from?n=l(h.from):"object"==typeof h.from&&p&&(n=p.lonLatToPixels(f(h.from))),"string"==typeof h.to?s=l(h.to):"object"==typeof h.to&&p&&(s=p.lonLatToPixels(f(h.to))),e.fromPos=n,e.toPos=s,n&&s&&(r+=(n.x+s.x)/2,i+=(n.y+s.y)/2),E(e.options.weight,t.options.weight)&&o.push(E(e.options.weight,t.options.weight))}),this.smallestWeight=W(o),this.greatestWeight=L(o),this.centerOfPoints={x:r/this.points.length,y:i/this.points.length},this.points.forEach(function(o){if(!t.getLinkWidth(o)){o.shapeArgs={d:[]};return}o.fromPos&&(o.plotX=o.fromPos.x,o.plotY=o.fromPos.y),o.shapeType="path",o.shapeArgs=t.getPointShapeArgs(o),o.color=E(o.options.color,o.series.color)})},o.prototype.getPointShapeArgs=function(t){var r,i=t.fromPos,e=t.toPos;if(!i||!e)return{};var n=this.getLinkWidth(t)/2,s=t.options,a=C(this.options.markerEnd,s.markerEnd),p=E(s.growTowards,this.options.growTowards),h=i.x||0,c=i.y||0,l=e.x||0,f=e.y||0,u=E(s.curveFactor,this.options.curveFactor),y=a&&a.enabled&&a.height||0;if(k(u)||(u=this.autoCurve(h,c,l,f,this.centerOfPoints.x,this.centerOfPoints.y)),y){y=T(y,4*n);var g=l-h,d=f-c,m=h+(g*=.5),v=c+(d*=.5),w=g,P=m+(g=d)*u,b=v+(d=-w)*u,O=o.normalize(P-l,b-f),_=O[0],A=O[1];_*=y,A*=y,l+=_,f+=A}var L=l-h,W=f-c,j=h+(L*=.5),M=c+(W*=.5),S=L;L=W,W=-S;var z=o.normalize(L,W),q=z[0],R=z[1],D=1+.25*Math.sqrt(u*u);q*=n*D,R*=n*D;var F=j+L*u,H=M+W*u,Q=o.normalize(F-h,H-c),X=Q[0],Y=Q[1];S=X,X=Y,Y=-S,X*=n,Y*=n;var I=o.normalize(F-l,H-f),K=I[0],V=I[1];S=K,K=-V,V=S,K*=n,V*=n,p&&(X/=n,Y/=n,q/=4,R/=4);var G={d:[["M",h-X,c-Y],["Q",F-q,H-R,l-K,f-V],["L",l+K,f+V],["Q",F+q,H+R,h+X,c+Y],["Z"]]};if(a&&a.enabled&&G.d){var N=o.markerEndPath([l-K,f-V],[l+K,f+V],[e.x,e.y],a);(r=G.d).splice.apply(r,x([2,0],N,!1))}var Z=t.options.from,B=t.options.to,J=Z.lat,U=Z.lon,$=B.lat,tt=B.lon;return J&&U&&(t.options.from=""+ +J+", ".concat(+U)),$&&tt&&(t.options.to=""+ +$+", ".concat(+tt)),G},o.defaultOptions=C(_.defaultOptions,{animation:!0,dataLabels:{enabled:!1},fillOpacity:.5,markerEnd:{enabled:!0,height:"40%",width:"40%",markerType:"arrow"},width:1,maxWidth:25,minWidth:5,lineWidth:void 0,tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.options.from} â†’ {point.options.to}: <b>{point.options.weight}</b>"}}),o}(_);j(S.prototype,{pointClass:m,pointArrayMap:["from","to","weight"],drawPoints:b.prototype.drawPoints,dataColumnKeys:b.prototype.dataColumnKeys,useMapGeometry:!0}),l().registerSeriesType("flowmap",S);var z=h();return a.default}()});