!/**
 * Highcharts JS v12.1.2 (2025-01-09)
 * Treegraph chart series type
 * @module highcharts/modules/treegraph
 * @requires highcharts
 * @requires highcharts/modules/treemap
 *
 *  (c) 2010-2024 Pawel Lysy Grzegorz Blachlinski
 *
 * License: www.highcharts.com/license
 */function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("highcharts"),require("highcharts").SeriesRegistry,require("highcharts").SVGRenderer,require("highcharts").Point,require("highcharts").Color,require("highcharts").SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/treegraph",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"],["highcharts/highcharts","SVGRenderer"],["highcharts/highcharts","Point"],["highcharts/highcharts","Color"],["highcharts/highcharts","SVGElement"]],e):"object"==typeof exports?exports["highcharts/modules/treegraph"]=e(require("highcharts"),require("highcharts").SeriesRegistry,require("highcharts").SVGRenderer,require("highcharts").Point,require("highcharts").Color,require("highcharts").SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGRenderer,t.Highcharts.Point,t.Highcharts.Color,t.Highcharts.SVGElement)}(this,function(t,e,i,o,r,n){return function(){"use strict";var s,a,l,h,p={620:function(t){t.exports=r},260:function(t){t.exports=o},28:function(t){t.exports=n},540:function(t){t.exports=i},512:function(t){t.exports=e},944:function(e){e.exports=t}},d={};function c(t){var e=d[t];if(void 0!==e)return e.exports;var i=d[t]={exports:{}};return p[t](i,i.exports,c),i.exports}c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,{a:e}),e},c.d=function(t,e){for(var i in e)c.o(e,i)&&!c.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var u={};c.d(u,{default:function(){return tg}});var f=c(944),v=c.n(f),y=c(512),g=c.n(y),b=c(540),m=c.n(b),x=(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mod=0,e.shift=0,e.change=0,e.children=[],e.preX=0,e.hidden=!1,e.wasVisited=!1,e.collapsed=!1,e}return x(e,t),e.prototype.nextLeft=function(){return this.getLeftMostChild()||this.thread},e.prototype.nextRight=function(){return this.getRightMostChild()||this.thread},e.prototype.getAncestor=function(t,e){return t.ancestor.children[0]===this.children[0]?t.ancestor:e},e.prototype.getLeftMostSibling=function(){var t=this.getParent();if(t)for(var e=0,i=t.children;e<i.length;e++){var o=i[e];if(o&&o.point.visible)return o}},e.prototype.hasChildren=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].point.visible)return!0;return!1},e.prototype.getLeftSibling=function(){var t=this.getParent();if(t){for(var e=t.children,i=this.relativeXPosition-1;i>=0;i--)if(e[i]&&e[i].point.visible)return e[i]}},e.prototype.getLeftMostChild=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].point.visible)return t[e]},e.prototype.getRightMostChild=function(){for(var t=this.children,e=t.length-1;e>=0;e--)if(t[e].point.visible)return t[e]},e.prototype.getParent=function(){return this.parentNode},e.prototype.getFirstChild=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].point.visible)return t[e]},e}(g().seriesTypes.treemap.prototype.NodeClass),k=c(260),L=c.n(k),O=(a=function(t,e){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),C=g().seriesTypes.treemap.prototype.pointClass,T=v().addEvent,w=v().fireEvent,S=v().merge,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataLabelOnHidden=!0,e.isLink=!1,e.setState=L().prototype.setState,e}return O(e,t),e.prototype.draw=function(){t.prototype.draw.apply(this,arguments);var e=this.graphic;e&&e.animate({visibility:this.visible?"inherit":"hidden"}),this.renderCollapseButton()},e.prototype.renderCollapseButton=function(){var t=this.series,e=this.graphic&&this.graphic.parentGroup,i=t.mapOptionsToLevel[this.node.level||0]||{},o=S(t.options.collapseButton,i.collapseButton,this.options.collapseButton),r=o.width,n=o.height,s=o.shape,a=o.style,l=this.series.chart,h=this.visible&&(this.collapsed||!o.onlyOnHover||"hover"===this.state)?1:0;if(this.shapeArgs){if(this.collapseButtonOptions=o,this.collapseButton){if(this.node.children.length&&o.enabled){var p=this.getCollapseBtnPosition(o),d=p.x,c=p.y;this.collapseButton.attr({text:this.collapsed?"+":"-",rotation:l.inverted?90:0,rotationOriginX:r/2,rotationOriginY:n/2,visibility:this.visible?"inherit":"hidden"}).animate({x:d,y:c,opacity:h})}else this.collapseButton.destroy(),delete this.collapseButton}else{if(!this.node.children.length||!o.enabled)return;var u=this.getCollapseBtnPosition(o),d=u.x,c=u.y,f=o.fillColor||this.color||"#cccccc";this.collapseButton=l.renderer.label(this.collapsed?"+":"-",d,c,s).attr({height:n-4,width:r-4,padding:2,fill:f,rotation:l.inverted?90:0,rotationOriginX:r/2,rotationOriginY:n/2,stroke:o.lineColor||"#ffffff","stroke-width":o.lineWidth,"text-align":"center",align:"center",zIndex:1,opacity:h,visibility:this.visible?"inherit":"hidden"}).addClass("highcharts-tracker").addClass("highcharts-collapse-button").removeClass("highcharts-no-tooltip").css(S({color:"string"==typeof f?l.renderer.getContrast(f):"#333333"},a)).add(e),this.collapseButton.element.point=this}}},e.prototype.toggleCollapse=function(t){var e=this.series;this.update({collapsed:null!=t?t:!this.collapsed},!1,void 0,!1),w(e,"toggleCollapse"),e.redraw()},e.prototype.destroy=function(){this.collapseButton&&(this.collapseButton.destroy(),delete this.collapseButton,this.collapseButton=void 0),this.linkToParent&&(this.linkToParent.destroy(),delete this.linkToParent),t.prototype.destroy.apply(this,arguments)},e.prototype.getCollapseBtnPosition=function(t){var e=this.series.chart.inverted,i=t.width,o=t.height,r=this.shapeArgs||{},n=r.x,s=r.y,a=r.width,l=r.height;return{x:(void 0===n?0:n)+t.x+(e?-(.3*o):(void 0===a?0:a)+-.3*i),y:(void 0===s?0:s)+(void 0===l?0:l)/2-o/2+t.y}},e}(C);T(M,"mouseOut",function(){var t=this.collapseButton,e=this.collapseButtonOptions;t&&(null==e?void 0:e.onlyOnHover)&&!this.collapsed&&t.animate({opacity:0})}),T(M,"mouseOver",function(){var t,e;this.collapseButton&&this.visible&&this.collapseButton.animate({opacity:1},null===(e=null===(t=this.series.options.states)||void 0===t?void 0:t.hover)||void 0===e?void 0:e.animation)}),T(M,"click",function(){this.toggleCollapse()}),c(620);var X=(v().extend,v().isArray),N=v().isNumber,A=v().isObject,B=v().merge,_=v().pick,R=v().relativeLength,W=function(t){var e,i,o,r,n,s,a={};if(A(t))for(r=N(t.from)?t.from:1,s=t.levels,i={},e=A(t.defaults)?t.defaults:{},X(s)&&(i=s.reduce(function(t,i){var o,n,s;return A(i)&&N(i.level)&&(n=_((s=B({},i)).levelIsConstant,e.levelIsConstant),delete s.levelIsConstant,delete s.level,A(t[o=i.level+(n?0:r-1)])?B(!0,t[o],s):t[o]=s),t},{})),n=N(t.to)?t.to:1,o=0;o<=n;o++)a[o]=B({},e,A(i[o])?i[o]:{});return a},j=function(t,e){var i=t.chart,o=t.options,r=o.nodeDistance,n=void 0===r?0:r,s=o.nodeWidth,a=void 0===s?0:s,l=i.plotSizeX,h=void 0===l?1:l;if("auto"===a){if("string"==typeof n&&/%$/.test(n))return h/(e+parseFloat(n)/100*(e-1));var p=Number(n);return(h+p)/(e||1)-p}return R(a,h)},E=function(t){var e,i;return A(t)&&(i=A(t.options)?t.options:{},e=_(t.rootNode,i.rootId,""),A(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e},V=(l=function(t,e){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),q=v().pick,z=v().extend,H=function(t){function e(e,i,o,r){var n=t.call(this,e,i,o)||this;return n.dataLabelOnNull=!0,n.formatPrefix="link",n.isLink=!0,n.node={},n.formatPrefix="link",n.dataLabelOnNull=!0,r&&(n.fromNode=r.node.parentNode.point,n.visible=r.visible,n.toNode=r,n.id=n.toNode.id+"-"+n.fromNode.id),n}return V(e,t),e.prototype.update=function(t,e,i,o){var r={id:this.id,formatPrefix:this.formatPrefix};L().prototype.update.call(this,t,!this.isLink&&e,i,o),this.visible=this.toNode.visible,z(this,r),q(e,!0)&&this.series.chart.redraw(i)},e}(g().seriesTypes.column.prototype.pointClass),D=function(){function t(){}return t.createDummyNode=function(t,e,i){var o=new P;return o.id=t.id+"-"+i,o.ancestor=t,o.children.push(e),o.parent=t.id,o.parentNode=t,o.point=e.point,o.level=e.level-i,o.relativeXPosition=e.relativeXPosition,o.visible=e.visible,t.children[e.relativeXPosition]=o,e.oldParentNode=t,e.relativeXPosition=0,e.parentNode=o,e.parent=o.id,o},t.prototype.calculatePositions=function(t){var e=t.nodeList;this.resetValues(e);var i=t.tree;i&&(this.calculateRelativeX(i,0),this.beforeLayout(e),this.firstWalk(i),this.secondWalk(i,-i.preX),this.afterLayout(e))},t.prototype.beforeLayout=function(e){for(var i=0;i<e.length;i++)for(var o=e[i],r=0,n=o.children;r<n.length;r++){var s=n[r];if(s&&s.level-o.level>1)for(var a=s.level-o.level-1;a>0;)s=t.createDummyNode(o,s,a),a--}},t.prototype.resetValues=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.mod=0,i.ancestor=i,i.shift=0,i.thread=void 0,i.change=0,i.preX=0}},t.prototype.calculateRelativeX=function(t,e){for(var i=t.children,o=0,r=i.length;o<r;++o)this.calculateRelativeX(i[o],o);t.relativeXPosition=e},t.prototype.firstWalk=function(t){var e;if(t.hasChildren()){for(var i=t.getLeftMostChild(),o=0,r=t.children;o<r.length;o++){var n=r[o];this.firstWalk(n),i=this.apportion(n,i)}this.executeShifts(t);var s=t.getLeftMostChild(),a=t.getRightMostChild(),l=(s.preX+a.preX)/2;(e=t.getLeftSibling())?(t.preX=e.preX+1,t.mod=t.preX-l):t.preX=l}else(e=t.getLeftSibling())?(t.preX=e.preX+1,t.mod=t.preX):t.preX=0},t.prototype.secondWalk=function(t,e){t.yPosition=t.preX+e,t.xPosition=t.level;for(var i=0,o=t.children;i<o.length;i++){var r=o[i];this.secondWalk(r,e+t.mod)}},t.prototype.executeShifts=function(t){for(var e=0,i=0,o=t.children.length-1;o>=0;o--){var r=t.children[o];r.preX+=e,r.mod+=e,i+=r.change,e+=r.shift+i}},t.prototype.apportion=function(t,e){var i=t.getLeftSibling();if(i){for(var o=t,r=t,n=i,s=o.getLeftMostSibling(),a=o.mod,l=r.mod,h=n.mod,p=s.mod;n&&n.nextRight()&&o&&o.nextLeft();){n=n.nextRight(),s=s.nextLeft(),o=o.nextLeft(),(r=r.nextRight()).ancestor=t;var d=n.preX+h-(o.preX+a)+1;d>0&&(this.moveSubtree(t.getAncestor(n,e),t,d),a+=d,l+=d),h+=n.mod,a+=o.mod,p+=s.mod,l+=r.mod}n&&n.nextRight()&&!r.nextRight()&&(r.thread=n.nextRight(),r.mod+=h-l),o&&o.nextLeft()&&!s.nextLeft()&&(s.thread=o.nextLeft(),s.mod+=a-p),e=t}return e},t.prototype.moveSubtree=function(t,e,i){var o=e.relativeXPosition-t.relativeXPosition;e.change-=i/o,e.shift+=i,e.preX+=i,e.mod+=i,t.change+=i/o},t.prototype.afterLayout=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.oldParentNode&&(i.relativeXPosition=i.parentNode.relativeXPosition,i.parent=i.oldParentNode.parent,i.parentNode=i.oldParentNode,delete i.oldParentNode.children[i.relativeXPosition],i.oldParentNode.children[i.relativeXPosition]=i,i.oldParentNode=void 0)}},t}(),I={reversed:!1,marker:{radius:10,lineWidth:0,symbol:"circle",fillOpacity:1,states:{}},link:{color:"#666666",lineWidth:1,radius:10,cursor:"default",type:"curved"},collapseButton:{onlyOnHover:!0,enabled:!0,lineWidth:1,x:0,y:0,height:18,width:18,shape:"circle",style:{cursor:"pointer",fontWeight:"bold",fontSize:"1em"}},fillSpace:!1,tooltip:{linkFormat:"{point.fromNode.id} â†’ {point.toNode.id}",pointFormat:"{point.id}"},dataLabels:{defer:!0,linkTextPath:{attributes:{startOffset:"50%"}},enabled:!0,linkFormatter:function(){return""},padding:5,style:{textOverflow:"none"}},nodeDistance:30,nodeWidth:void 0},Y=c(28),G=c.n(Y),F=v().deg2rad,$=v().addEvent,K=v().merge,U=v().uniqueKey,J=v().defined,Q=v().extend;function Z(t,e){var i=this;e=K(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);var o=this.renderer.url,r=this.text||this,n=r.textPath,s=e.attributes,a=e.enabled;if(t=t||n&&n.path,n&&n.undo(),t&&a){var l=$(r,"afterModifyTree",function(e){if(t&&a){var n=t.attr("id");n||t.attr("id",n=U());var l={x:0,y:0};J(s.dx)&&(l.dx=s.dx,delete s.dx),J(s.dy)&&(l.dy=s.dy,delete s.dy),r.attr(l),i.attr({transform:""}),i.box&&(i.box=i.box.destroy());var h=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:Q(s,{"text-anchor":s.textAnchor,href:""+o+"#".concat(n)}),children:h}}});r.textPath={path:t,undo:l}}else r.attr({dx:0,dy:0}),delete r.textPath;return this.added&&(r.textCache="",this.renderer.buildText(r)),this}function tt(t){var e,i=t.bBox,o=null===(e=this.element)||void 0===e?void 0:e.querySelector("textPath");if(o){for(var r=[],n=this.renderer.fontMetrics(this.element),s=n.b,a=n.h-s,l=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),h=o.innerHTML.replace(l,"").split(/<tspan class="highcharts-br"[^>]*>/),p=h.length,d=function(t,e){var i=e.x,r=e.y,n=(o.getRotationOfChar(t)-90)*F,l=Math.cos(n),h=Math.sin(n);return[[i-a*l,r-a*h],[i+s*l,r+s*h]]},c=0,u=0;u<p;u++){for(var f=h[u].length,v=0;v<f;v+=5)try{var y=c+v+u,g=d(y,o.getStartPositionOfChar(y)),b=g[0],m=g[1];0===v?(r.push(m),r.push(b)):(0===u&&r.unshift(m),u===p-1&&r.push(b))}catch(t){break}c+=f-1;try{var y=c+u,x=o.getEndPositionOfChar(y),P=d(y,x),b=P[0],m=P[1];r.unshift(m),r.unshift(b)}catch(t){break}}r.length&&r.push(r[0].slice()),i.polygon=r}return i}function te(t){var e,i=t.labelOptions,o=t.point,r=i[o.formatPrefix+"TextPath"]||i.textPath;r&&!i.useHTML&&(this.setTextPath((null===(e=o.getDataLabelPath)||void 0===e?void 0:e.call(o,this))||o.graphic,r),o.dataLabelPath&&!r.enabled&&(o.dataLabelPath=o.dataLabelPath.destroy()))}var ti=(h=function(t,e){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),to={default:function(t){var e=t.x1,i=t.y1,o=t.x2,r=t.y2,n=t.width,s=void 0===n?0:n,a=t.inverted,l=void 0!==a&&a,h=t.radius,p=t.parentVisible,d=[["M",e,i],["L",e,i],["C",e,i,e,r,e,r],["L",e,r],["C",e,i,e,r,e,r],["L",e,r]];return p?function(t,e){for(var i=[],o=0;o<t.length;o++){var r=t[o][1],n=t[o][2];if("number"==typeof r&&"number"==typeof n){if(0===o)i.push(["M",r,n]);else if(o===t.length-1)i.push(["L",r,n]);else if(e){var s=t[o-1],a=t[o+1];if(s&&a){var l=s[1],h=s[2],p=a[1],d=a[2];if("number"==typeof l&&"number"==typeof p&&"number"==typeof h&&"number"==typeof d&&l!==p&&h!==d){var c=l<p?1:-1,u=h<d?1:-1;i.push(["L",r-c*Math.min(Math.abs(r-l),e),n-u*Math.min(Math.abs(n-h),e)],["C",r,n,r,n,r+c*Math.min(Math.abs(r-p),e),n+u*Math.min(Math.abs(n-d),e)])}}}else i.push(["L",r,n])}}return i}([["M",e,i],["L",e+s*(l?-.5:.5),i],["L",e+s*(l?-.5:.5),r],["L",o,r]],h):d},straight:function(t){var e=t.x1,i=t.y1,o=t.x2,r=t.y2,n=t.width,s=t.inverted;return t.parentVisible?[["M",e,i],["L",e+(void 0===n?0:n)*(void 0!==s&&s?-1:1),r],["L",o,r]]:[["M",e,i],["L",e,r],["L",e,r]]},curved:function(t){var e=t.x1,i=t.y1,o=t.x2,r=t.y2,n=t.offset,s=void 0===n?0:n,a=t.width,l=void 0===a?0:a,h=t.inverted,p=void 0!==h&&h;return t.parentVisible?[["M",e,i],["C",e+s,i,e-s+l*(p?-1:1),r,e+l*(p?-1:1),r],["L",o,r]]:[["M",e,i],["C",e,i,e,r,e,r],["L",o,r]]}},tr=g().series.prototype,tn=g().seriesTypes,ts=tn.treemap,ta=tn.column,tl=m().prototype.symbols,th=v().arrayMax,tp=v().crisp,td=v().extend,tc=v().merge,tu=v().pick,tf=v().relativeLength,tv=v().splat;({compose:function(t){$(t,"afterGetBBox",tt),$(t,"beforeAddingDataLabel",te);var e=t.prototype;e.setTextPath||(e.setTextPath=Z)}}).compose(G());var ty=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeList=[],e.links=[],e}return ti(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.layoutAlgorythm=new D;var e=this,i=this.chart.labelCollectors;i.some(function(t){return"collectorFunc"===t.name})||i.push(function(){var t=[];if(e.options.dataLabels&&!tv(e.options.dataLabels)[0].allowOverlap)for(var i=0,o=e.links||[];i<o.length;i++){var r=o[i];r.dataLabel&&t.push(r.dataLabel)}return t})},e.prototype.getLayoutModifiers=function(){var t=this,e=this.chart,i=this,o=e.plotSizeX,r=e.plotSizeY,n=th(this.points.map(function(t){return t.node.xPosition})),s=1/0,a=-1/0,l=1/0,h=-1/0,p=0,d=0,c=0,u=0;this.points.forEach(function(e){if(!t.options.fillSpace||e.visible){var f,v=e.node,y=i.mapOptionsToLevel[e.node.level]||{},g=tc(t.options.marker,y.marker,e.options.marker),b=null!==(f=g.width)&&void 0!==f?f:j(t,n),m=tf(g.radius||0,Math.min(o,r)),x=g.symbol,P="circle"!==x&&g.height?tf(g.height,r):2*m,k="circle"!==x&&b?tf(b,o):2*m;v.nodeSizeX=k,v.nodeSizeY=P,v.xPosition<=s&&(s=v.xPosition,d=Math.max(k+(g.lineWidth||0),d)),v.xPosition>=a&&(a=v.xPosition,p=Math.max(k+(g.lineWidth||0),p)),v.yPosition<=l&&(l=v.yPosition,u=Math.max(P+(g.lineWidth||0),u)),v.yPosition>=h&&(h=v.yPosition,c=Math.max(P+(g.lineWidth||0),c))}});var f=h===l?1:(r-(u+c)/2)/(h-l),v=h===l?r/2:-f*l+u/2,y=a===s?1:(o-(p+p)/2)/(a-s),g=a===s?o/2:-y*s+d/2;return{ax:y,bx:g,ay:f,by:v}},e.prototype.getLinks=function(){var t=this,e=this,i=[];return this.data.forEach(function(o){var r=e.mapOptionsToLevel[o.node.level||0]||{};if(o.node.parent){var n=tc(r,o.options);if(!o.linkToParent||o.linkToParent.destroyed){var s=new e.LinkClass(e,n,void 0,o);o.linkToParent=s}else o.collapsed=tu(o.collapsed,(t.mapOptionsToLevel[o.node.level]||{}).collapsed),o.linkToParent.visible=o.linkToParent.toNode.visible;o.linkToParent.index=i.push(o.linkToParent)-1}else o.linkToParent&&(e.links.splice(o.linkToParent.index),o.linkToParent.destroy(),delete o.linkToParent)}),i},e.prototype.buildTree=function(e,i,o,r,n){var s=this.points[i];return o=s&&s.level||o,t.prototype.buildTree.call(this,e,i,o,r,n)},e.prototype.markerAttribs=function(){return{}},e.prototype.setCollapsedStatus=function(t,e){var i=this,o=t.point;o&&(o.collapsed=tu(o.collapsed,(this.mapOptionsToLevel[t.level]||{}).collapsed),o.visible=e,e=!1!==e&&!o.collapsed),t.children.forEach(function(t){i.setCollapsedStatus(t,e)})},e.prototype.drawTracker=function(){ta.prototype.drawTracker.apply(this,arguments),ta.prototype.drawTracker.call(this,this.links)},e.prototype.translate=function(){var t,e=this,i=this.options,o=E(this);tr.translate.call(this);var r=this.tree=this.getTree();t=this.nodeMap[o],""===o||t&&t.children.length||(this.setRootNode("",!1),o=this.rootNode,t=this.nodeMap[o]),this.mapOptionsToLevel=W({from:t.level+1,levels:i.levels,to:r.height,defaults:{levelIsConstant:this.options.levelIsConstant,colorByPoint:i.colorByPoint}}),this.setCollapsedStatus(r,!0),this.links=this.getLinks(),this.setTreeValues(r),this.layoutAlgorythm.calculatePositions(this),this.layoutModifier=this.getLayoutModifiers(),this.points.forEach(function(t){e.translateNode(t)}),this.points.forEach(function(t){t.linkToParent&&e.translateLink(t.linkToParent)}),i.colorByPoint||this.setColorRecursive(this.tree)},e.prototype.translateLink=function(t){var e,i,o,r,n,s=t.fromNode,a=t.toNode,l=(null===(e=this.options.link)||void 0===e?void 0:e.lineWidth)||0,h=tu(null===(i=this.options.link)||void 0===i?void 0:i.curveFactor,.5),p=tu(null===(o=t.options.link)||void 0===o?void 0:o.type,null===(r=this.options.link)||void 0===r?void 0:r.type,"default");if(s.shapeArgs&&a.shapeArgs){var d=s.shapeArgs.width||0,c=this.chart.inverted,u=tp((s.shapeArgs.y||0)+(s.shapeArgs.height||0)/2,l),f=tp((a.shapeArgs.y||0)+(a.shapeArgs.height||0)/2,l),v=tp((s.shapeArgs.x||0)+d,l),y=tp(a.shapeArgs.x||0,l);c&&(v-=d,y+=a.shapeArgs.width||0);var g=a.node.xPosition-s.node.xPosition;t.shapeType="path";var b=(Math.abs(y-v)+d)/g-d,m=tp((y+v)/2,l);t.plotX=m,t.plotY=f,t.shapeArgs={d:to[p]({x1:v,y1:u,x2:y,y2:f,width:b,offset:b*h*(c?-1:1),inverted:c,parentVisible:a.visible,radius:null===(n=this.options.link)||void 0===n?void 0:n.radius})},t.dlBox={x:(v+y)/2,y:(u+f)/2,height:l,width:0},t.tooltipPos=c?[(this.chart.plotSizeY||0)-t.dlBox.y,(this.chart.plotSizeX||0)-t.dlBox.x]:[t.dlBox.x,t.dlBox.y]}},e.prototype.drawNodeLabels=function(t){for(var e,i,o,r,n,s,a=this.mapOptionsToLevel,l=0;l<t.length;l++){var h=t[l];if(s=a[h.node.level],n={style:{}},s&&s.dataLabels&&(n=tc(n,s.dataLabels),this.hasDataLabels=function(){return!0}),h.shapeArgs&&this.options.dataLabels){var p={},d=h.shapeArgs,c=d.width,u=void 0===c?0:c,f=d.height,v=void 0===f?0:f;this.chart.inverted&&(u=(e=[v,u])[0],v=e[1]),(null===(i=tv(this.options.dataLabels)[0].style)||void 0===i?void 0:i.width)||(p.width=""+u+"px"),(null===(o=tv(this.options.dataLabels)[0].style)||void 0===o?void 0:o.lineClamp)||(p.lineClamp=Math.floor(v/16)),td(n.style,p),null===(r=h.dataLabel)||void 0===r||r.css(p)}h.dlOptions=tc(n,h.options.dataLabels)}tr.drawDataLabels.call(this,t)},e.prototype.alignDataLabel=function(e,i){var o=e.visible;e.visible=!0,t.prototype.alignDataLabel.apply(this,arguments),i.animate({opacity:!1===o?0:1},void 0,function(){o||i.hide()}),e.visible=o},e.prototype.drawDataLabels=function(){this.options.dataLabels&&(this.options.dataLabels=tv(this.options.dataLabels),this.drawNodeLabels(this.points),tr.drawDataLabels.call(this,this.links))},e.prototype.destroy=function(){if(this.links){for(var t=0,e=this.links;t<e.length;t++)e[t].destroy();this.links.length=0}return tr.destroy.apply(this,arguments)},e.prototype.pointAttribs=function(t,e){var i=t&&this.mapOptionsToLevel[t.node.level||0]||{},o=t&&t.options,r=i.states&&i.states[e]||{};t&&(t.options.marker=tc(this.options.marker,i.marker,t.options.marker));var n=tu(r&&r.link&&r.link.color,o&&o.link&&o.link.color,i&&i.link&&i.link.color,this.options.link&&this.options.link.color),s=tu(r&&r.link&&r.link.lineWidth,o&&o.link&&o.link.lineWidth,i&&i.link&&i.link.lineWidth,this.options.link&&this.options.link.lineWidth),a=tr.pointAttribs.call(this,t,e);return t&&(t.isLink&&(a.stroke=n,a["stroke-width"]=s,delete a.fill),t.visible||(a.opacity=0)),a},e.prototype.drawPoints=function(){ts.prototype.drawPoints.apply(this,arguments),ta.prototype.drawPoints.call(this,this.links)},e.prototype.translateNode=function(t){var e=this.chart,i=t.node,o=e.plotSizeY,r=e.plotSizeX,n=this.layoutModifier,s=n.ax,a=n.bx,l=n.ay,h=n.by,p=s*i.xPosition+a,d=l*i.yPosition+h,c=this.mapOptionsToLevel[i.level]||{},u=tc(this.options.marker,c.marker,t.options.marker).symbol,f=i.nodeSizeY,v=i.nodeSizeX,y=this.options.reversed,g=i.x=e.inverted?r-v/2-p:p-v/2,b=i.y=y?d-f/2:o-d-f/2,m=tu(t.options.borderRadius,c.borderRadius,this.options.borderRadius),x=tl[u||"circle"];if(void 0===x?(t.hasImage=!0,t.shapeType="image",t.imageUrl=u.match(/^url\((.*?)\)$/)[1]):t.shapeType="path",!t.visible&&t.linkToParent){var P=t.linkToParent.fromNode;if(P){var k=P.shapeArgs||{},L=k.x,O=void 0===L?0:L,C=k.y,T=void 0===C?0:C,w=k.width,S=k.height;t.shapeArgs||(t.shapeArgs={}),t.hasImage||td(t.shapeArgs,{d:x(O,T,void 0===w?0:w,void 0===S?0:S,m?{r:m}:void 0)}),td(t.shapeArgs,{x:O,y:T}),t.plotX=P.plotX,t.plotY=P.plotY}}else t.plotX=g,t.plotY=b,t.shapeArgs={x:g,y:b,width:v,height:f,cursor:t.node.isLeaf?"default":"pointer"},t.hasImage||(t.shapeArgs.d=x(g,b,v,f,m?{r:m}:void 0));t.tooltipPos=e.inverted?[o-b-f/2,r-g-v/2]:[g+v/2,b]},e.defaultOptions=tc(ts.defaultOptions,I),e}(ts);td(ty.prototype,{pointClass:M,NodeClass:P,LinkClass:H}),g().registerSeriesType("treegraph",ty);var tg=v();return u.default}()});