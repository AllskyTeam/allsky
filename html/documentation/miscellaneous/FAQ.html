<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../js/documentation.js" type="application/javascript"></script>
    <link href="../css/light.css" rel="stylesheet">
	<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<style>
		#pageTitle::before {
			content: "Allsky FAQ";
		} 
	</style>
    <link href="../css/documentation.css" rel="stylesheet">
    <link href="../documentation-favicon.ico" rel="shortcut icon" type="image/png">
	<title>Allsky FAQ</title>
</head>
<body>
<div w3-include-html="/documentation/pageHeader.html" id="pageHeader"></div>
<div class="Layout">
<div class="Layout-sidebar" w3-include-html="/documentation/sidebar.html" id="sidebar"></div>
<div class="Layout-main markdown-body" id="mainContents">

<h2>After starting Allsky, all I get is "Allsky software is starting up"</h2>
<details><summary></summary>
<p>
Most likely Allsky is dropping all images for being overly dark or overly bright due to inappropriate settings.
Check the log to see what it says by running
<code>tail -f /var/log/allsky.log</code> in a terminal window.
</p>
<p>
If you are using <b>manual</b> exposure/gain try adjusting those values.
</p>
<p>
If you are using <b>auto</b> exposure/gain, the starting values are what you specified as the manual values,
and it may take several exposures for the software to find the best exposure.
While it's doing that, you'll see the "Allsky software is starting up" message.  This is normal.
However, if the message remains after several minutes follow the instructions
<a allsky="true" href="/documentation/troublehsooting/reportingIssues.html">here</a>
and submit the log file.
</p>
<p>
You can also temporarily set the
<span class="WebUISetting">Remove Bad Images Thresholds</span> to
<span class="WebUIValue">0</span>
to see what the incorrectly exposed images look like - this
might give you an idea of the problem.
</p>
</details>


<h2>Why is there is a long delay between pictures?</h2>
<details><summary></summary>
<p>
The time between when one picture ends and another starts is determined by
these settings:
<ol>
	<li><span class="WebUISetting">Delay</span> (daytime or nighttime).
	<li><span class="WebUISetting">Max Auto-Exposure</span> (daytime or nighttime),
		even if you are using manual exposure.
	<li><span class="WebUISetting">Consistent Delays Between Images</span>.
</ol>
There are two possibilities:
<ol>
	<li>If <span class="WebUISetting">Consistent Delays Between Images</span> is "Yes",
		then the total delay is <strong>always</strong>:
		<br>&nbsp; &nbsp; &nbsp;
		<span class="WebUISetting">Delay</span> +
		<span class="WebUISetting">Max Auto-Exposure</span>.
	<li>If <span class="WebUISetting">Consistent Delays Between Images</span> is "No",
		then the total delay is simply the <span class="WebUISetting">Delay</span>.
</ol>
If the time between pictures is longer than you expected,
check your <span class="WebUISetting">Max Auto-Exposure</span>.
</p>
</details>


<h2 id="SDwear">How do I reduce wear on my SD card?</h2>
<details><summary></summary>
<p>
SD cards have a limited number of writes they can handle before they wear out.
Although this is usually a very large number you may want to
minimize writes to the SD card
by moving the <span class="fileName">~/allsky/tmp</span>
directory from the SD card into memory.
</p>
<p>
During Allsky installation you were prompted to do this -
if you did you can ignore this FAQ item.
</p>

<blockquote>
If you have a Pi 5 or newer you can also replace the SD card with an NVMe SSD disk
which is much faster, more reliable, and allows significantly more space than an SD card
(but costs more).
To do this you'll need to add a board to your Pi
(called an <strong>NVMe HAT</strong>) as well as an NVMe disk.
Search for those terms on the Internet to see your options.
</blockquote>

Before putting <span class="fileName">~/allsky/tmp</span> into memory
note the following:
<ul>
<li>In order to do this you'll need enough free RAM memory,
	so this may not work well with systems with very limited memory, for example, 512 MB.
<li>The <span class="fileName">~/allsky/tmp</span> directory and its contents
	will be erased every time you reboot your Pi.
	This is ok since that directory is only used for temporary files (hence the same)
	that are invalid after a reboot.
</ul>
<p>
then execute:
<pre>
allsky-config  recheck_tmp
</pre>

You should accept the defaults.
</details>


<h2>How do I focus my allsky camera?</h2>
<details><summary></summary>
<blockquote>
If you have a camera with auto-focus like the RPi Module 3,
see the camera documentation for how to focus it.
</blockquote>
<p>
Try to get your camera at least roughly focused during the day.
It'll be easier to see the focus ring on your lens,
and exposure duration will be much shorter so you'll get more instant feedback.
Focusing on slow-moving clouds works well.
</p>
<p>
Enable the <span class="WebUISetting">Show Focus Metric</span>
setting in the WebUI's <span class="WebUIWebPage">Allsky Settings</span> page.
If you are using the <strong>module</strong> overlay method,
in the <span class="editorName">Overlay Editor</span> add the <strong>${FOCUS}</strong>
variable to the image anywhere you want.
Use a large font to make it easier to see.
</p>
<p>
A focus number will appear on your images - the higher the number, the better focus you have.
Note that the number can change depending on the brightness,
so focus when the brightness isn't changing.
<p>
When done focusing, disable the <span class="WebUISetting">Show Focus Metric</span>
setting since it's no longer needed.
While this method may be "good enough", the most accurate way to focus is
at night using stars.
Zoom in on the image and look for stars that are bright but not saturated.
Keep focusing until the stars are as small as possible.
</p>
</details>


<h2>The <span class="fileName">/var/log/allsky.log</span> file is gone.  How do I get it back?</h2>
<details><summary></summary>
<p>
Do the following in order, stopping when the log file reappears:
<ol>
	<li>Try restarting the software: <code>sudo systemctl restart allsky</code>.
	<li>Restart the software that controls the log files:
		<code>sudo systemctl restart syslog</code>.
	<li>Reboot the Pi.
	<li>Wait until tomorrow - sometimes the log file
		mysteriously reappears after midnight.
		Note this is NOT an Allsky problem since it also happens with other services.
</ol>
</p>
</details>


<!--
<h2>Pro-tip: install <code>gh</code> on your Pi so you can easily collaborate using Github Gists</h2>
<details><summary></summary>
<p>
Click <a href="https://cli.github.com/">here</a>
for the full details or download the latest release from
<a href="https://github.com/cli/cli/releases/latest">here</a>.
Once you have the Command Line Interface (CLI) installed,
you can easily upload a script you wrote with something like:
<pre>
gh gist create -d "a tool to find alien spaceships" < my_awesome_allsky_script.py
</pre>

or share logs using something like
<pre>
journalctl --since 05:00 -u allsky | gh gist create
gh gist create < log.txt
</pre>
</details>
-->


</div><!-- Layout-main -->
</div><!-- Layout -->
</body>
</html>
<script> includeHTML(); </script>
