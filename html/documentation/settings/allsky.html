<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="../js/documentation.js" type="application/javascript"></script>
	<link href="../css/light.css" rel="stylesheet">
	<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<style>
		#pageTitle::before {
			content: "Allsky Settings";
		} 
	</style>
	<link href="../css/documentation.css" rel="stylesheet">
	<link href="../documentation-favicon.ico" rel="shortcut icon" type="image/png">
	<script src="../js/all.min.js" type="application/javascript"></script>
	<title>AllSky Settings</title>
</head>
<body>
<div w3-include-html="/documentation/pageHeader.html" id="pageHeader"></div>
<div class="Layout">
<div class="Layout-sidebar" w3-include-html="/documentation/sidebar.html" id="sidebar"></div>
<div class="Layout-main markdown-body" id="mainContents">

Once you've installed Allsky there are many settings you must modify via the WebUI's
<span class="WebUIWebPage">Allsky Settings</span> page.

<h2><i class="fa fa-camera fa-fw"></i> <span class="WebUIWebPage">Allsky Settings</span> WebUI Page</h2>
<p>
This section lists the settings that are updated in the WebUI's
<span class="WebUIWebPage">Allsky Settings</span> page.
A (partial) typical page is below.
</p>
<img allsky="true" src="AllskySettingsPage.png" class="imgBorder imgCenter" title="Typical Allsky Settings page" alt="AllskySettings" loading="lazy">

<p>
<blockquote>
<b>RPi camera users, note</b>
that several settings have different ranges on Buster versus Bullseye,
so you'll need to update them when upgrading to Bullseye.
For example, <span class="WebUISetting">Contrast</span> in Buster ranged from
-100 to 100, whereas in newer operating systems it starts at 0.
</blockquote>
</p>
<p>
The exact list of settings available depends on your camera model;
settings specific to a camera <b>type</b> (e.g., RPi or ZWO)
are indicated as such in the table below.
Where appropriate, the WebUI displays the minimum, maximum, and default values when
you hover over a value,
and only displays settings the camera supports, like cooler temperature for cooled cameras.
</p>
<div class="legend">
<span class="legendHeader">Legend:</span>
<ul class="minimalPadding">
<li><span class="cameraDependent">CD</span>
	indicates the setting's default is
	<span class="cameraDependent">C</span>amera
	<span class="cameraDependent">D</span>ependent
	and is displayed in the WebUI.
<li><span class="AW">AW</span>
	indicates a setting who's value is uploaded to your
	<span class="cameraDependent">A</span>llsky
	<span class="cameraDependent">W</span>ebsite(s) when changed.
</ul>
</div>

<table role="table">
<thead>
<tr>
	<th>WebUI Setting</th>
	<th>Default</th>
	<th>Description</th>
</tr>
</thead>
<tbody>
<tr><td class="note" colspan="3">Daytime settings</td></tr>

<tr><td><span class="WebUISetting">Daytime Capture</span></td>
	<td>Yes</td>
	<td>Enable to <b>capture</b> images during the day.</td>
</tr>
<tr><td><span class="WebUISetting">Daytime Save</span> <span class="AW">AW</span></td>
	<td>No</td>
	<td>Enable to <b>save</b> images during the day (they are always saved at night).
	Only applies if <span class="WebUISetting">Daytime Capture</span> is enabled.
	</td>
</tr>
<tr><td><span class="WebUISetting">Auto-Exposure</span></td>
	<td>Yes</td>
	<td>Turns on/off Auto-Exposure, which delivers properly exposed images even if
	the overall brightness of the sky changes due to cloud cover, sun, etc.</td>
</tr>
<tr><td><span class="WebUISetting">Max Auto-Exposure</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>The maximum exposure in milliseconds when using 
	<span class="WebUISetting">Auto-Exposure</span>.
	When <span class="WebUISetting">Auto-Exposure</span> is on,
	this value will be used as the delay between frames.
	Ignored if <span class="WebUISetting">Auto-Exposure</span> is off.</td>
</tr>
<tr><td><span class="WebUISetting">Manual Exposure</span></td>
	<td>0.5</td>
	<td>Manual exposure time in milliseconds.
	If <span class="WebUISetting">Auto-Exposure</span>
	is on this value is used as a starting exposure.</td>
</tr>
<tr><td><span class="WebUISetting">Mean Target</span></td>
	<td>0.5</td>
	<td>The target mean brightness level when
	<span class="WebUISetting">Auto-Exposure</span> is on.
	Ranges from 0.0 (pure black) to 1.0 (pure white).
	Best used when both <span class="WebUISetting">Auto-Exposure</span> and
	<span class="WebUISetting">Auto-Gain</span> are enabled.</td>
</tr>
<tr><td><span class="WebUISetting">Mean Threshold</span></td>
	<td>0.1</td>
	<td>When using <span class="WebUISetting">Mean Target</span>,
		this specifies how close (plus or minus) the target brightness should be to the
		<span class="WebUISetting">Mean Target</span>.
		<br>For example, if <span class="WebUISetting">Mean Target</span> is
		<code>0.4</code> and 
		<span class="WebUISetting">Mean Threshold</span> is <code>0.1</code>
		then the target brightness ranges from <code>0.3</code> to <code>0.5</code>
	</td>
</tr>
<tr><td><span class="WebUISetting">Delay</span></td>
	<td>5000</td>
	<td>Time in milliseconds to wait between the end of one image and the start of the next.</td>
</tr>
<tr><td><span class="WebUISetting">Auto-Gain</span></td>
	<td>No</td>
	<td>Turns on/off Auto-Gain which delivers properly exposed images even if
	the overall brightness of the sky changes.
	With RPi cameras, this should typically be turned on.
	With ZWO cameras you'll probably want this off and use the lowest
	gain possible since daytime images are bright and don't need any gain.</td>
</tr>
<tr><td><span class="WebUISetting">Max Auto-Gain</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>Maximum gain when using <span class="WebUISetting">Auto-Gain</span>.
	Ignored if <span class="WebUISetting">Auto-Gain</span> is off.</td>
</tr>
<tr><td><span class="WebUISetting">Gain</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>Gain is similar to ISO on regular cameras.
	When <span class="WebUISetting">Auto-Gain</span> is on, this value is used as a starting gain.
	When <span class="WebUISetting">Auto-Gain</span> is off,
	increasing this produces brighter images, but with more noise.
	<br>The default daytime gain is the minimum possible for the camera since
	daytime images are normally bright and don't need any additional gain.
	</td>
</tr>
<tr><td><span class="WebUISetting">Binning</span></td>
	<td>1x1</td>
	<td>Bin 2x2 collects the light from 4 pixels to form one larger pixel on the image.
	Bin 3x3 uses 9 pixels, etc.
	Increasing the bin results in smaller,
	lower-resolution images and reduces the need for long exposure.
	Look up your camera specifications to know what values are supported.
	<br>During the day this setting is usually only changed for testing.
	<blockquote>Binning on CCD cameras normally produces brighter images.
	CMOS camera may, or may not produce brighter images, depending on the camera model.
	</blockquote>
	</td>
</tr>
<tr><td><span class="WebUISetting">Auto White Balance</span></td>
	<td>No</td>
	<td>Sets daytime auto white balance.
	When used, <span class="WebUISetting">Red balance</span> and
	<span class="WebUISetting">Blue balance</span> are used as starting points.</td>
</tr>
<tr><td><span class="WebUISetting">Red Balance</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>The intensity of the red component of the image.</td>
</tr>
<tr><td><span class="WebUISetting">Blue Balance</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>The intensity of the blue component of the image.</td>
</tr>
<tr><td><span class="WebUISetting">Frames To Skip</span></td>
	<td>5</td>
	<td>When starting Allsky during the day, skip <i>up to</i> this many images
	while the auto-exposure software gets to the correct exposure.
	<br>Only applies if daytime <span class="WebUISetting">Auto-Exposure</span> is enabled.
	</td>
</tr>
<tr><td><span class="WebUISetting">Cooling</span></td>
	<td>No</td>
	<td>(ZWO cooled cameras only) Enable to use cooling on cameras that support it.</td>
</tr>
<tr><td><span class="WebUISetting">Target Temp.</span></td>
	<td>0</td>
	<td>(ZWO cooled cameras only) Sensor's target temperature <i>when cooler is enabled</i>.
	In degrees Celsius.</td>
</tr>
<tr><td><span class="WebUISetting">Tuning File</span></td>
	<td>No</td>
	<td>(RPi on Bullseye only) Name of the optional daytime tuning file.
	See <a href="https://www.raspberrypi.com/documentation/accessories/camera.html"
		target="_blank">this documentation</a> for more information.
	</td>
</tr>

<tr><td class="note" colspan="3">Nighttime settings
	<p>Unless otherwise specified, these setttings are the same as the daytime ones.</td>
</tr>

<tr><td><span class="WebUISetting">Auto-Exposure</span></td>
	<td>Yes</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Max Auto-Exposure</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Manual Exposure</span></td>
	<td>10000</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Mean Target</span></td>
	<td>0.2</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Mean Threshold</span></td>
	<td>0.1</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Delay</span></td>
	<td>10</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Auto-Gain</span></td>
	<td>No</td>
	<td>With ZWO cameras enabling <span class="WebUISetting">Auto-Exposure</span> and
	<span class="WebUISetting">Auto-Gain</span> together
	can produce unpredictable results so testing is needed.</td>
</tr>
<tr><td><span class="WebUISetting">Max Auto-Gain</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Gain</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>The default is one-half the maximum for the camera.</td>
</tr>
<tr><td><span class="WebUISetting">Binning</span></td>
	<td>1x1</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Auto White Balance</span></td>
	<td>No</td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Red Balance</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Blue Balance</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td></td>
</tr>
<tr><td><span class="WebUISetting">Frames To Skip</span></td>
	<td>1</td>
	<td>Only applies if nighttime <span class="WebUISetting">Auto-Exposure</span> is enabled.</td>
</tr>
<tr><td><span class="WebUISetting">Cooling</span></td>
	<td>No</td>
	<td>(ZWO cooled cameras only)</td>
</tr>
<tr><td><span class="WebUISetting">Target Temp.</span></td>
	<td>0</td>
	<td>(ZWO cooled cameras only)</td>
</tr>
<tr><td><span class="WebUISetting">Tuning File</span></td>
	<td>No</td>
	<td>(RPi on Bullseye only)</td>
</tr>

<tr><td class="note" colspan="3">Both daytime and nighttime settings</td></tr>

<!-- THIS MAY CHANGE IN THE FUTURE. THE RPi width AND height BEHAVIOR HAS ONLY BEEN TESTED WITH LIBCAMERA.
a "digital zoom" whereby the specified portion of the camera's sensor is used when taking a picture,
but the picture is then expanded so <b>the final picture resolution is the same as the camera's resolution</b>.
0 turns off digital zoom and uses the sensor's maximum width.
Look up your camera specifications to know what values are supported.
If you want the final image to contain only a portion of what strikes the sensor,
use the <span class="shSetting">CROP</span> setting in the
<span class="fileName">config.sh</span> file instead.
-->
<tr><td><span class="WebUISetting">Configuration File</span></td>
	<td>[none]</td>
	<td>Configuration file to use for settings.  Not currently used.</td>
</tr>
<tr><td><span class="WebUISetting">Extra Parameters</span></td>
	<td></td>
	<td>(RPi only) Any additional parameters to send to the
		<code>libcamera-still</code> image capture program.
		It supports a lot of settings that Allsky doesn't (e.g., auto-focus options),
		and this field allows you to enter those settings.
		<br>
	</td>
</tr>
<tr><td><span class="WebUISetting">Saturation</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>(RPi only) Sets saturation from black and white to extra saturated.</td>
</tr>
<tr><td><span class="WebUISetting">Contrast</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>(RPi only) Changes the difference between blacks and whites in an image.</td>
</tr>
<tr><td><span class="WebUISetting">Sharpness</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>(RPi only) Changes the sharpness of an imgage.
	Images that are too sharp look unnatural.</td>
</tr>
<tr><td><span class="WebUISetting class="WebUISetting"">Gamma</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>(ZWO only) Increases or decreases contrast between dark and bright areas.</td>
</tr>
<tr><td><span class="WebUISetting">Aggression</span></td>
	<td>75%</td>
	<td>(ZWO only) Specifies how much of a calculated exposure change should be made
	during auto-exposure. Lower numbers smooth out brightness changes but take longer to
	react to changes.</td>
</tr>
<tr><td><span class="WebUISetting">Gain Transition Time</span></td>
	<td>15</td>
	<td>(ZWO only) Number of <b>minutes</b> over which to increase or decrease
	the gain when going from day-to-night or night-to-day images.
	This helps smooth brightness differences.
	Only works if nighttime <span class="WebUISetting">Auto-Gain</span> is off.
	<span class="WebUIValue">0</span> disables transitions.</td>
</tr>
<tr><td><span class="WebUISetting">Image Width</span></td>
	<td>0</td>
	<td><span class="WebUIValue">0</span> uses the sensor's full width in pixels.
	Otherwise, with <b>ZWO</b> cameras the
	<span class="WebUISetting">Image Width</span> and <span class="WebUISetting">Image Height</span>
	settings set a crop area around the center of the sensor,
	the same as the <span class="shSetting">CROP</span> setting in
	<span class="fileName">config.sh</span>.
	With <b>RPi</b> cameras these settings decrease resolution of the full-sensor image,
	then increase the resolution, thereby negating the changes.
	<br><b>There is no reason to set the <span class="WebUISetting">Width</span> and
	<span class="WebUISetting">Height</span> with RPi cameras.</b></td>
</tr>
<tr><td><span class="WebUISetting">Image Height</span></td>
	<td>0</td>
	<td> Same as <span class="WebUISetting">Width</span> but for the sensor's height.</td>
</tr>
<tr><td><span class="WebUISetting">Image Type</span></td>
	<td>auto</td>
	<td>Image format: <b>auto</b>:
	automatically picks the best type of image based on the camera.
	If you have a color camera it will use RGB24;
	mono cameras use RAW16 if the output file is a .png,
	otherwise RAW8 is used.
	<b>RAW8</b>: 8-bit mono. <b>RGB24</b>: color (red, green, blue), 8 bits per channel.
	<b>RAW16</b>: 16-bit mono.</td>
</tr>
<tr><td><span class="WebUISetting">Quality / Compression</span></td>
	<td>95</td>
	<td>For JPG images, this specifies the quality - 0 (low quality) to 100 (high quality).
	Larger numbers produce higher-quality, but larger, files.
	For PNG, this is the amount of compression - 0 for no compression (but quicker to save)
	to 9 for highest compression (but slowest to save).
	If you use very short delays between pictures you may want to play with these
	numbers to get the quickest delay possible.</td>
</tr>
<tr><td><span class="WebUISetting">Auto USB Bandwidth</span></td>
	<td>Yes</td>
	<td>(ZWO only) Automatically sets the <span class="WebUISetting">USB bandwidth</span>.</td>
</tr>
<tr><td><span class="WebUISetting">USB Bandwidth</span></td>
	<td><span class="cameraDependent">CD</span></td>
	<td>(ZWO only) How much of the USB bandwidth to use.</td>
</tr>
<tr><td><span class="WebUISetting">Filename</span> <span class="AW">AW</span></td>
	<td>image.jpg</td>
	<td>The name of the image file. Supported extensions are <b>jpg</b> and <b>png</b>.</td>
</tr>
<tr><td><span class="WebUISetting">Rotation</span></td>
	<td>None</td>
	<td>(RPi on Bullseye only) How to rotate the image.
	On <b>Bullseye</b> images can only be rotated 180 degrees.</td>
</tr>
<tr><td><span class="WebUISetting">Flip</span></td>
	<td>No flip</td>
	<td>How to flip the image (No flip, Horizontal, Vertical, or Both).</td>
</tr>
<tr><td><span class="WebUISetting">Notification Images</span></td>
	<td>Yes</td>
	<td>Displays notification images, e.g., "Camera off during day" if
	daytime images are not being taken.</td>
</tr>
<tr><td><span class="WebUISetting">Consistent Delays Between Images</span></td>
	<td>Yes</td>
	<td>Enable this to force the time between the start of exposures to be a consistent length
	(<span class="WebUISetting">Max Auto-Exposure + Delay</span>).
	Doing this will result in timelapse video frames being equally spaced,
	for example, every 90 seconds, regardless of how long an individual frame's exposure is.
	</td>
</tr>
<tr><td><span class="WebUISetting">Time Format</span></td>
	<td>%Y%m%d %H:%M:%S</td>
	<td>Determines the format of the displayed time.
	Run <code>man 3 strftime</code> to see the options.</td>
</tr>
<tr><td><span class="WebUISetting">Temperature Units</span></td>
	<td>Celsius</td>
	<td>Determines what unit(s) the temperature will be displayed in (Celsius, Fahrenheit, or Both).</td>
</tr>
<tr><td><span class="WebUISetting">Latitude</span> <span class="AW">AW</span></td>
	<td></td>
	<td>Latitude of the camera.
	Formats include: 123.4N, 123.4S, +123.4, or -123.4.
	Southern hemisphere is negative.
	The "+" is needed for positive numbers.
	</td>
</tr>
<tr><td><span class="WebUISetting">Longitude</span> <span class="AW">AW</span></td>
	<td></td>
	<td>Longitude of the camera.
	Formats include: 123.4E, 123.4W, +123.4, or -123.4.
	West is negative.
	The "+" is needed for positive numbers.
	<blockquote>
	The actual values for latitude and longitude are not displayed on the map,
	but users can zoom in to see exactly where your camera is.
	If that bothers you, change the latitude and/or longitude values slightly.
	Allsky itself only uses them to determine when daytime and nighttime begin so
	you can change the values a fair amount and not impact anything.
	</blockquote>
	</td>
</tr>
<tr><td><span class="WebUISetting">Angle</span> <span class="AW">AW</span></td>
	<td>-6</td>
	<td>Altitude of the Sun above or below the horizon at which daytime and nighttime switch.
	Can be negative (Sun below horizon) or positive (Sun above horizon).
	<ul class="minimalPadding">
	<li><span class="WebUIValue">0</span> = Sunset
	<li><span class="WebUIValue">-6</span> = Civil twilight
	<li><span class="WebUIValue">-12</span> = Nautical twilight
	<li><span class="WebUIValue">-18</span> = Astronomical twilight
	</ul>
	<a allsky="true" href="/documentation/explanations/angleSunriseSunset.html">Click here</a>
	for a more detailed description of <span class="WebUISetting">Angle</span>.
	</td>
</tr>
<tr><td><span class="WebUISetting">Take Dark Frames</span></td>
	<td>No</td>
	<td>Enable to take dark frames which are use to decrease noise in images.
	<br>
	See the
	<a allsky="true" href="/documentation/explanations/darkFrames.html">in-depth explanation</a>
	of dark frames, including how to take and use them.
	</td>
</tr>
<tr><td><span class="WebUISetting">Use Dark Frames</span></td>
	<td>No</td>
	<td>Enable to perform dark frame subtraction at night.
	<br>Requires that you first took dark frames using the
	<span class="WebUISetting">Take Dark Frames</span> setting.
	</td>
</tr>
<tr><td><span class="WebUISetting">Locale</span></td>
	<td></td>
	<td>The locale is used to determine what the thousands and decimal separators are
	as well as the language to use for many non-Allsky commands.
	If you have never set the locale in Allsky,
	the installation script will display a list of locales installed on your Pi,
	highlighting the current one.
	If it's the correct one, press the TAB key until the cursor is
	over <code>&lt;Ok&gt;</code>, then press ENTER.
	<p>
	<blockquote>
	The locale only needs to be set once and won't change unless you reinstall the Pi OS.
	Changing the locale requires a reboot, which <strong>must</strong> be done
	before continuing the installation.
	</blockquote>
	</p>
	If the correct locale isn't in the list it needs to be installed,
	so <code>&lt;Cancel&gt;</code> out of the installation and run
	<code>sudo raspi-config</code>, selecting <code>Localisation Options</code>,
	followed by the <code>Locale</code> option.
	You will be shown a drop-down list with hundreds of locales; when you find the correct
	one for your language and country, press the SPACE bar,
	then TAB to the <code>&lt;Ok&gt;</code> button.
	It will take a few seconds for the locale to be installed;
	when done, re-run the installation script selecting the locale you just installed.
	</td>
</tr>
<tr><td><span class="WebUISetting">ZWO Exposure Type</span></td>
	<td>Snapshot</td>
	<td>(ZWO only) Determines what type of exposures to take:
	<ol>
		<li><span class="WebUIValue">Snapshot</span>
			takes pictures one at a time like a "normal" camera.
			If for some reason this doesn't work,
			try the next type and let the Allsky developers know.
		</li>
		<li><span class="WebUIValue">Video Off</span>
			takes pictures like a video camera that is turned off after every picture.
			This is the same as the old
			<span class="WebUISetting">Version 0.8 exposure</span> setting.
		</li>
		<li><span class="WebUIValue">Video (original)</span>
			takes pictures like a video camera that is always on.
			This is the original exposure method.
		</li>
	</ol>
	The first two types decrease the sensor temperature between 5 - 15 degrees Celsius.
</tr>
<tr><td><span class="WebUISetting">Histogram Box</span></td>
	<td>500 500 50 50</td>
	<td>(ZWO only) X and Y size of histogram box in pixels and the middle point of
	the box in percent.
	This box is used to determine the average brightness of the image for auto-exposure
	compensation.
	If the Sun goes through the center of your image you may want to move the box.
	</td>
</tr>
<tr><td><span class="WebUISetting">Debug Level</span></td>
	<td>0</td>
	<td>Determines the amount of output in the log file.
	Log entries can also be viewed with <code>journalctl -u allsky</code>.
	<br><span class="WebUIValue">0</span> outputs error messages only.
	<span class="WebUIValue">4</span> outputs a LOT of messages and generally should
	only be used if an Allsky developers directs you to.
	</td>
</tr>
<tr><td><span class="WebUISetting">Require WebUI Login</span></td>
	<td>Yes</td>
	<td>Determines if you need to log into the WebUI.
	<b>If you Pi is accessible on the Internet, do NOT disable this!!</b></td>
</tr>

<tr><td class="note" colspan="3">Image overlay settings
	<p>See the
	<a allsky="true" href="/documentation/overlays/overlays.html">overlay page</a>
	for details on the image overlay.
	<br><b>Note, the <u>image overlay</u> is what's embedded in every image;
	the <u>constellation overlay</u> is what's optionally overlayed
	on top of images in the Allsky Website.</b>
	This page only deals with the <u>image overlay</u>.
	</p>
</td></tr>
<tr><td><span class="WebUISetting">Overlay Method</span></td>
	<td>legacy</td>
	<td>Set to <span class="WebUIValue">module</span>
	to have image overlays added by the new, enhanced
	<a allsky="true" href="/documentation/overlays/overlays.html">overlay</a> program.
	<br><b>In this mode, the overlay settings below do NOT apply</b>.
	<blockquote>
	This setting, as well as the legacy mode and this "Image overlay settings"
	section will be removed in the next Allsky release.
	</blockquote>
	<p>
	When setting to <span class="WebUIValue">module</span>, don't forget to enable the
	daytime and/or nighttime <span class="moduleName">Overlay Modules</span> in the
	<span class="managerName">Overlay Manager</span>.
	</p>
	</td>
</tr>
<tr><td><span class="WebUISetting">Show Time</span></td>
	<td>Yes</td>
	<td>Display the time the picture was taken in the overlay?</td>
</tr>
<tr><td><span class="WebUISetting">Show Temperature</span></td>
	<td>Yes</td>
	<td>(ZWO only) Display the camera sensor temperature in the overlay?</td>
</tr>
<tr><td><span class="WebUISetting">Show Exposure</span></td>
	<td>Yes</td>
	<td>Display the exposure time in the overlay? If <span class="WebUISetting">Auto-Exposure</span> is enabled,
	"(auto)" will appear after the exposure.</td>
</tr>
<tr><td><span class="WebUISetting">Show Gain</span></td>
	<td>Yes</td>
	<td>Display the gain in the overlay? If <span class="WebUISetting">Auto-Gain</span> is enabled,
	"(auto)" will appear after the gain.</td>
</tr>
<tr><td><span class="WebUISetting">Show USB</span></td>
	<td>No</td>
	<td>(ZWO only) Display the USB Bandwidth in the overlay? This is primarily for debugging.</td>
</tr>
<tr><td><span class="WebUISetting">Show Mean Brightness</span></td>
	<td>No</td>
	<td>Display the mean (average) brightness in the overlay?
	This value is used to determine the correct auto-exposure and auto-gain levels.</td>
</tr>
<tr><td><span class="WebUISetting">Show Histogram Box</span></td>
	<td>No</td>
	<td>(ZWO only) Show the histogram box on the image?</td>
</tr>
<tr><td><span class="WebUISetting">Show Focus Metric</span></td>
	<td>No</td>
	<td>Display a focus metric in the overlay to help you focus the camera?
		Higher numbers are better, but only use when the brightness isn't changing.
	</td>
</tr>
<tr><td><span class="WebUISetting">Text Overlay</span></td>
	<td></td>
	<td>Text overlay that appears below the time, in the same font.</td>
</tr>
<tr><td><span class="WebUISetting">Extra Text File</span></td>
	<td></td>
	<td>The full path name to a text file which will be displayed under other information.
	The file can contain multiple lines which will be displayed underneath each other.</td>
</tr>
<tr><td><span class="WebUISetting">Max Age Of Extra</span></td>
	<td>0</td>
	<td>If you specified an <span class="WebUISetting">Extra Text File</span>
	then it must be updated within this number of seconds;
	if not it's contents will not be displayed.
	Set to <span class="WebUIValue">0</span> to ignore this check and always display the contents of the file.</td>
</tr>
<tr><td><span class="WebUISetting">Line Height</span></td>
	<td>30</td>
	<td>The line height of the text displayed in the image.
	If you change the font size then adjust this value if required.</td>
</tr>
<tr><td><span class="WebUISetting">Text X</span></td>
	<td>15</td>
	<td>Start of text from the left side, in pixels.</td>
</tr>
<tr><td><span class="WebUISetting">Text Y</span></td>
	<td>35</td>
	<td>Start of text from the top, in pixels.</td>
</tr>
<tr><td><span class="WebUISetting">Font Name</span></td>
	<td>Simplex</td>
	<td>Font type for the overlay.</td>
</tr>
<tr><td><span class="WebUISetting">Font Color</span></td>
	<td>255 0 0</td>
	<td>Font color in Blue, Green, and Red (BGR).
	NOTE: When using RAW 16 only the first two values are used, i.e., 255 128 0.</td>
</tr>
<tr><td><span class="WebUISetting">Small Font Color</span></td>
	<td>0 0 255</td>
	<td>Small font color in BGR.
	NOTE: When using RAW 16 only the first two values are used, i.e., 255 128 0.</td>
</tr>
<tr><td><span class="WebUISetting">Font Smoothness</span></td>
	<td>Antialiased</td>
	<td>Controls the smoothness of the fonts.</td>
</tr>
<tr><td><span class="WebUISetting">Font Size</span></td>
	<td>7</td>
	<td>Font size.
	This is impacted by the sensor size so you'll need to experiment with this.</td>
</tr>
<tr><td><span class="WebUISetting">Font Weight</span></td>
	<td>1</td>
	<td>Font line thickness.</td>
</tr>
<tr><td><span class="WebUISetting">Use Outline Font</span></td>
	<td>No</td>
	<td>Should an outline to the text overlay be added to improve contrast?</td>
</tr>


<tr><td class="note" colspan="3">Allsky Website and Remote Server Settings
	<p>Allsky supports uploading files to a local (i.e., on your Pi) Website,
	a remote (i.e., not on your Pi) Website,
	and/or a remote server that is NOT an Allsky Website.
	</p>
</td></tr>

<tr><td><span class="WebUISetting">Display Settings</span></td>
	<td>No</td>
	<td>People sometimes ask others what settings they are using.
	Enable this setting to add a link to your Allsky Website's right-side
	popout that displays your settings.
	<br>This only works if you are running the Allsky Website.</td></tr>

<tr><td><span class="WebUISetting">Use Local Website</span></td>
	<td>No</td>
	<td>Enable to use a <b>local</b> Allsky Website.
	No other settings are needed for a local Website.
	<br>
	If you were using a local Website and disable it you will be asked if you
	want to keep or remove the saved images, keograms, startrails, and timelapse videos.
	Either way, the Website itself is not not removed nor are its settings so you can
	easily re-enable it and pick up where you left off.
	</td></tr>
<tr><td class="subnote" colspan="3">Remote Website Settings</td></tr>
<tr><td><span class="WebUISetting">Use Remote Website</span></td>
	<td>No</td>
	<td>Enable to use a <b>remote</b> Allsky Website.
	Enable the Website BEFORE you
	<a allsky="true" href="/documentation/installations/AllskyWebsite.html">install</a>
	it since the installation needs the settings below.
	</td></tr>
<tr><td><span class="WebUISetting">Protocol</span></td>
	<td>ftps</td>
	<td>Specifies how files should be uploaded to the remote Website.
	<ul class="minimalPadding">
		<li><code>ftps</code> -
			uses secure File Transfer Protocol (FTPs) to upload to a remote server.
		<li><code>sftp</code> -
			uses SSH file transfer to upload to a remote server.
		<li><code>ftp</code> -
			uses (insecure) File Transfer Protocol (FTP) to upload to a remote server.
			<blockquote class="warning">
				<code>ftp</code> is unsecure;
				please use 
				<code>ftps</code> or
				<code>sftp</code> instead.
			</blockquote>
		<li><code>scp</code> -
			uses secure cp (copy) to copy the file to a remote server.
		<li><code>s3</code> -
			copies the file to an Amazon Web Services (AWS) server.
		<li><code>gcs</code> -
			copies the file to a Google Cloud Storage (GCS) server.
	</ul>
	<p>Some of the settings below only apply to certain protocols.</p>
	</td></tr>
<tr><td><span class="WebUISetting">Server Name</span></td>
	<td></td>
	<td>Name of the remote server.
		Note that this is normally NOT the same as the URL used to access the server.
		If you don't know the name of the server,
		ask the person or company supporting the server.
	</td></tr>
<tr><td><span class="WebUISetting">Port</span></td>
	<td></td>
	<td>(ftp protocols only) Optional port required by the server.
		This is rarely needed as the software can usually determine what port to use.
	</td></tr>
<tr><td><span class="WebUISetting">User Name</span></td>
	<td></td>
	<td>The username of the login on the remote Website.
	</td></tr>
<tr><td><span class="WebUISetting">Password</span></td>
	<td></td>
	<td>The password of the login on the remote Website.
	</td></tr>
<tr><td><span class="WebUISetting">FTP Commands</span></td>
	<td></td>
	<td>(ftp protocols only) Optional colon-separated list of commands to send to the ftp server
		prior to transfering files.
		If you have problems uploading to an ftp server you'll often need to add
		something to this field - see the
		<a allsky="true" href="/documentation/troubleshooting/uploads.html">Troubleshooting -> Uploads</a>
		page for more information.
	</td></tr>
<tr><td><span class="WebUISetting">Image Directory</span></td>
	<td></td>
	<td>(ftp protocols only) Name of the directory the current image should be uploaded to.
		<blockquote>
		This setting is a major cause of confusion for many users.
		If you don't know what to enter,
		ask the person or company supporting the server or look in the
		<a allsky="true" href="/documentation/troubleshooting/uploads.html">Troubleshooting -> Uploads</a>
		page for more information.
		</blockquote>
	</td></tr>
<tr><td><span class="WebUISetting">SSH Key File</span></td>
	<td></td>
	<td>(scp protocol only) Path to the SSH key.
	<br>
	You need to set up SSH key authentication on your server.
	First, generate an SSH key on your Pi:
<pre>ssh-keygen -t rsa</pre>
	When prompted, leave the default filename, and use an empty passphrase.
	Then, copy the generated key to your server:
<pre>ssh-copy-id remote_username@server_ip_address</pre>
	The private SSH key will be stored in
	<span class="fileName">~/.ssh</span> (default filename is <span class="fileName">id_rsa</span>).
	<p>
	If you are using SSH Key with Amazon's Lightsail,
	copy the <span class="fileName">ssh-key.pem</span> file to your Pi,
	for example, in <span class="fileName">~</span>,
	then execute <code class="nowrap">chmod 400 ~/ssh-key.pem</code> and set:
	<ul class="minimalpadding">
		<li><span class="WebUISetting">Protocol</span> to <code>sftp</code>
		<li><span class="WebUISetting">Server Name</span> to <code>remote host name</code>
		<li><span class="WebUISetting">User Name</span> to <code>remote user name</code>
		<li><span class="WebUISetting">Password</span> to <code>n/a</code>
		<li><span class="WebUISetting">FTP Commands</span> to
			<code>set sftp:connect-program 'ssh -a -x -i /home/pi/ssh-key.pem'</code>
	</ul>
	</p>
	</td></tr>
<tr><td><span class="WebUISetting">AWS CLI Directory</span></td>
	<td>${HOME}/.local/bin</td>
	<td>(s3 protocol only) Directory on the Pi where the AWS Command-Line Interface (CLI)
	tools are installed.
	You need to install tools:
<pre>
pip3 install awscli --upgrade --user
export PATH="${HOME}/.local/bin:${PATH}"
aws configure
</pre>
	When prompted, enter a valid access key ID, Secret Access Key, and Default region name,
	for example, (e.g. "us-west-2").
	Set the Default output format to "json" when prompted.
	</td></tr>
<tr><td><span class="WebUISetting">S3 Bucket</span></td>
	<td>allskybucket</td>
	<td>(s3 protocol only) Name of the S3 bucket where files will be uploaded to
	(must be in Default region specified above).
	You may want to turn off or limit bucket versioning to avoid consuming lots of
	space with multiple versions of the "image.jpg" files.
	</td></tr>
<tr><td><span class="WebUISetting">S3 ACL</span></td>
	<td>private</td>
	<td>(s3 protocol only) S3 Access Control List (ACL).
	<br>
	If you want to serve your uploaded files vis http(s),
	change this to <code>public-read</code>.
	You will need to ensure the S3 bucket policy is configured to allow public access to
	objects with a <code>public-read</code> ACL.
	<br>You may need to set a CORS policy in S3 if the files are to be accessed by
	Javascript from a different domain.
	</td></tr>
<tr><td><span class="WebUISetting">GCS Bucket</span></td>
	<td>allskybucket</td>
	<td>(gcs protocol only) Name of the GCS bucket where files will be uploaded to.
	<br>
	You need to install the <code>gsutil</code> command which is part of the Google Cloud SDK.
	See installation instructions
	<a href="https://cloud.google.com/storage/docs/gsutil_install">here</a>.
	<br>
	NOTE: The <code>gsutil</code> command must be installed somewhere in the standard ${PATH},
	usually in <span class="fileName">/usr/bin</span>.
	Make sure you authenticate the cli tool with the correct user as well.
	</td></tr>
<tr><td><span class="WebUISetting">GCS ACL</span></td>
	<td>private</td>
	<td>(gcs protocol only) GCS Access Control List (ACL).
	You can use any one of the predefined ACL rules found
	<a href="https://cloud.google.com/storage/docs/access-control/lists#predefined-acl">here</a>.
	To access files over https, set this to <code>publicRead</code>.
	</td></tr>
<tr><td><span class="WebUISetting">Remote Video File Name</span></td>
	<td></td>
	<td>The name to give to the remote timelapse video file.
		If not specified it's the same as the file on your Pi.
	</td></tr>
<tr><td><span class="WebUISetting">Remote Keogram File Name</span></td>
	<td></td>
	<td>The name to give to the remote keogram file.
		If not specified it's the same as the file on your Pi.
	</td></tr>
<tr><td><span class="WebUISetting">Remote Startrails File Name</span></td>
	<td></td>
	<td>The name to give to the remote startrails file.
		If not specified it's the same as the file on your Pi.
	</td></tr>
<tr><td><span class="WebUISetting">Website URL</span></td>
	<td></td>
	<td>Your website's URL, for example: https://www.mywebsite.com/allsky.
	<blockquote>
	If a <span class="WebUISetting">Website URL</span> is specified,
	the <span class="WebUISetting">Image URL</span> must also be specified, and vice versa.
	</blockquote>
	</td></tr>
<tr><td><span class="WebUISetting">Image URL</span></td>
	<td></td>
	<td>The URL to your allsky image, for example: https://wwww.mywebsite.com/allsky/image.jpg.
		Normally this will be the <span class="WebUISetting">Website URL</span> followed by
		<code>image.jpg</code>.
		<br>Use the more secure "https" over "http" if possible.

<tr><td class="subnote" colspan="3">Remote Server Settings
	<p>These settings are the same as for the Remote Website so are not described.</p>
</td></tr>
<tr><td><span class="WebUISetting">Use Remote Website</span></td>
	<td>No</td>
	<td>Enable to use a remote server which is NOT running the Allsky Website software.
		Files will be copied to this server which normally will be a private website
		where you want to display the most recent images along with other,
		non-Allsky information.
		For example, if you have an observatory website and want to show the latest image,
		you would use the settings below.
	</td></tr>
<tr><td><span class="WebUISetting">Protocol</span></td>
	<td>ftps</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Server Name</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Port</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">User Name</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Password</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">FTP Commands</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Image Directory</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">SSH Key File</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">AWS CLI Directory</span></td>
	<td>${HOME}/.local/bin</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">S3 Bucket</span></td>
	<td>allskybucket</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">S3 ACL</span></td>
	<td>private</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">GCS Bucket</span></td>
	<td>allskybucket</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">GCS ACL</span></td>
	<td>private</td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Remote Video File Name</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Remote Keogram File Name</span></td>
	<td></td>
	<td></td></tr>
<tr><td><span class="WebUISetting">Remote Startrails File Name</span></td>
	<td></td>
	<td></td></tr>


<tr><td class="note" colspan="3">Allsky Map Settings
	<p>
	If you want your allsky camera's location to display on the
	<a href='https://www.thomasjacquin.com/allsky-map'>Allsky map</a>,
	the information in this section will be sent to the map server every other
	morning to ensure it's fresh.
	The server automatically removes old data.
	Note that only a limited number of updates per day are allowed to catch bogus updates.
	</p>
	</td>
</tr>

<tr><td><span class="WebUISetting">Show on Map</span></td>
	<td>No</td>
	<td>Enable to have your camera appear on the
	<a href='https://www.thomasjacquin.com/allsky-map'>Allsky map</a>.
	<br><b>If off, the following settings are ignored.</b></td></tr>

<tr><td><span class="WebUISetting">Location</span> <span class="AW">AW</span></td>
	<td></td>
	<td>The location of your camera.
	You can put any level of detail you want.</td></tr>
<tr><td><span class="WebUISetting">Owner</span> <span class="AW">AW</span></td>
	<td></td>
	<td>The owner of the camera - your name, an association name, an observatory, etc.</td></tr>
<tr><td><span class="WebUISetting">Camera</span> <span class="AW">AW</span></td>
	<td></td>
	<td>The type and model of your camera, for example: <b>ZWO ASI224MC</b> or <b>RPi HQ</b>.
	This field is required and a default value is set during Allsky installation.</td></tr>
<tr><td><span class="WebUISetting">Lens</span> <span class="AW">AW</span></td>
	<td></td>
	<td>The lens you're using on your camera, for example: <b>Arecont 1.55</b>.</td></tr>
<tr><td><span class="WebUISetting">Computer</span> <span class="AW">AW</span></td>
	<td></td>
	<td>The computer running your allsky camera, for example: <b>Raspberry Pi 3</b>.
	This field is required and a default value is set during Allsky installation.</td></tr>


<tr><td class="note" colspan="3">Camera Type</td></tr>

<tr><td><span class="WebUISetting">Camera Type</span></td>
	<td></td>
	<td>The type of camera you are using: ZWO or RPi.
	<br>If you have both a ZWO and RPi camera, this setting determines which to use.
	<br>If you replace a camera with another one of the same <strong>type</strong>
	(e.g., a ZWO ASI120 with a ZWO ASI290)
	select <span class="dropdown">Refresh</span> in the drop-down.
	</td></tr>
<tr><td><span class="WebUISetting">Camera Model</span></td>
	<td></td>
	<td>This <strong>read-only</strong> field displays the model of camera you are using.
	It is determined automatically based on what camera is connected to your Pi.
	<br>If more than one camera of the specified type is connected,
	the first one is used.</td></tr>


<tr><td class="note" colspan="3">WebUI Settings</td></tr>

<tr><td><span class="WebUISetting">Images Sort Order</span></td>
	<td>Ascending</td>
	<td>Determines how the images for a day in the
	the WebUI's <span class="WebUIWebPage">Images</span> page are displayed.
	<br><span class="WebUIValue">Ascending</span>
		sorts oldest image to newest.
	<br><span class="WebUIValue">Descending</span>
		sorts newest (i.e., most recent) image to oldest.
	</td></tr>
<tr><td><span class="WebUISetting">Show Updated Message</span></td>
	<td>Yes</td>
	<td>Determines whether or not the
 	<span class='alert-info'>Daytime images updated every...</span>
	message in the <span class='WebUIWebPage'>Live View</span> page is shown.
	</td></tr>
<tr><td><span class="WebUISetting">System Page Additions</span></td>
	<td></td>
	<td>One or more colon-separated full path names to text files
	that contain user-supplied data to display on the WebUI's
	<span class="WebUIWebPage">System</span> page.
	See the <a allsky="true" href="/documentation/explanations/SystemPageAdditions.html">SystemPageAdditions</a>
	for more information and an example of this setting.
	</td></tr>

</tbody>
</table>


<h2><i class="fa fa-code fa-fw"></i> <span class="WebUIWebPage">Editor</span> WebUI Page</h2>
<details><summary></summary>
<p>
This section lists the settings that are updated in the WebUI's
<span class="WebUIWebPage">Editor</span> page.
A typical page is below:
</p>
<img allsky="true" src="EditorPage-json.png" class="imgBorder imgCenter" title="Typical Editor page" alt="Editor" loading="lazy">
<p>
This page allows you to edit the
<span class="dropdown">configuration.json (local Website)</span> and
<span class="dropdown">remote_configuration.json (remote Website)</span>
files if you are using the indicated Website.
</p>

<p>
The table below describes the settings in the
<span class="dropdown">config.sh</span> file.
<br>
Settings in the <span class="dropdown">configuration.json</span> files are described in the
<a allsky="true" href="allskyWebsite.html#configuration.json">Allsky Website Settings</a> page.
</p>
<p>
Information on the color scheme used by the Editor in the screenshot above is
<a allsky="true" external="true" href="EditorColors.html" target="_blank" title="Opens in new tab">here </a>.
</p>

<h3>config.sh settings</h3>
<p>
These settings let you configure the overall behavior of Allsky,
and are updated by clicking on the WebUI's 
<span class="WebUIWebPage">Editor</span> page, then selecting
<span class="dropdown">config.sh</span> in the drop-down list at the bottom of the page.
</p>
<details sub><summary></summary>

<table role="table">
<thead>
<tr>
	<th>Setting</th>
	<th>Default</th>
	<th>Description</th>
</tr>
</thead>
<tbody>

<tr><td class="note" colspan="3">image.jpg Settings</td></tr>

<tr><td><span class="shSetting">IMG_UPLOAD</span></td>
	<td>false</td>
	<td>Upload the current image to a local or remote Allsky Website?
	<br>Ignored if you don't have an Allsky Website.
	</td>
</tr>
<tr><td><span class="shSetting">IMG_UPLOAD_ORIGINAL_NAME</span></td>
	<td>false</td>
	<td>Should the name of the uploaded image be <span class="fileName">image.jpg</span> (if false)
	or <span class="fileName">image-YYYYMMDDHHMMSS.jpg</span> (if true)?
	<br>This is rarely used and is ignored if you don't have an Allsky Website or
	<span class="shSetting">IMG_UPLOAD</span> is false.
	</td>
</tr>
<tr><td><span class="shSetting">IMG_UPLOAD_FREQUENCY</span></td>
	<td>1</td>
	<td>How often should the current image be uploaded?
	This is useful for slow or costly networks.
	<br>This only applies if <span class="shSetting">IMG_UPLOAD</span> is "true".
	</td>
</tr>
<tr><td><span class="shSetting">IMG_RESIZE</span></td>
	<td>false</td>
	<td>Resize images before cropping and stretching?
	Large sensor cameras like the RPi HQ may need to be resized (i.e., shrunken)
	in order for timelapses to work.
	<br>Typically you'll want the
	<span class="shSetting">IMG_WIDTH</span>&nbsp;/&nbsp;<span class="shSetting">IMG_HEIGHT</span>
	ratio to be the same as the sensor's width / height ratio,
	otherwise images will be distorted.</td>
</tr>
<tr><td><span class="shSetting">IMG_WIDTH</span></td>
	<td>1520</td>
	<td>The width of the resized image.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">IMG_HEIGHT</span></td>
	<td>2028</td>
	<td>The height of the resized image.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">CROP_IMAGE</span></td>
	<td>false</td>
	<td>Crop images before stretching?
	This is often used to remove the dark areas around an image when using a fisheye lens.
	The image is cropped from the center so you'll need to experiment with the correct settings.
	Cropped images on the left or top will likely need the
	<span class="WebUISetting">Text X</span> and/or <span class="WebUISetting">Text Y</span>
	WebUI settings changed.</td>
</tr>
<tr><td><span class="shSetting">CROP_WIDTH</span></td>
	<td>640</td>
	<td>The width of the resulting image.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">CROP_HEIGHT</span></td>
	<td>480</td>
	<td>The height of the resulting image.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">CROP_OFFSET_X</span></td>
	<td>0</td>
	<td>The X offset to use when cropping.
	To move the crop rectangle left, use a negative number.</td>
</tr>
<tr><td><span class="shSetting">CROP_OFFSET_Y</span></td>
	<td>0</td>
	<td>The Y offset to use when cropping.
	To move the crop rectangle up, use a negative number.</td>
</tr>
<tr><td><span class="shSetting">AUTO_STRETCH</span></td>
	<td>false</td>
	<td>Stretch the image?
	This increases the contrast without saturating highlights or shadows.
	<br>
	See <a allsky="true" href="/documentation/explanations/exposureGainSaturation.html#stretch">this page</a>
	for more information on stretching images.
	</td>
</tr>
<tr><td><span class="shSetting">AUTO_STRETCH_AMOUNT</span></td>
	<td>10</td>
	<td>How much to increase the contrast. 0 is none, 3 is typical, and 20 is a lot.</td>
</tr>
<tr><td><span class="shSetting">AUTO_STRETCH_MID_POINT</span></td>
	<td>10%</td>
	<td>Where the maximum change "slope" in contrast should fall in the image
	(0% is white; 50% is middle-gray; 100% is black).</td>
</tr>

<tr><td><span class="shSetting">RESIZE_UPLOADS</span></td>
	<td>false</td>
	<td>Resize uploaded pictures?
	<br>You may want images on your Pi to have higher resolution than images
	uploaded to an Allsky Website.
	For example, images from cameras with large sensors won't fit on most monitors
	at full resolution, so huge images in some senses are a waste.
	</td>
</tr>
<tr><td><span class="shSetting">RESIZE_UPLOADS_WIDTH</span></td>
	<td>962</td>
	<td>Sets the width of resized images being uploaded.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">RESIZE_UPLOADS_HEIGHT</span></td>
	<td>720</td>
	<td>Sets the height of resized images being uploaded.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">IMG_CREATE_THUMBNAILS</span></td>
	<td>true</td>
	<td>Create thumbnails of the images and save in <span class="fileName">~/allsky/images</span>?
	If you never look at them via the WebUI's <span class="WebUIWebPage">Images<span> page,
	consider changing this to "false".
	</td>
</tr>
<tr><td><span class="shSetting">REMOVE_BAD_IMAGES_THRESHOLD_LOW</span></td>
	<td>0.01</td>
	<td>Images whose mean brightness is below this percent will be removed.
	Useful values range from <code>0.01</code> to around <code>0.2</code>.
	<br>Set to <code>0</code> to disable this check.
	</td>
</tr>
<tr><td><span class="shSetting">REMOVE_BAD_IMAGES_THRESHOLD_HIGH</span></td>
	<td>0.9</td>
	<td>Images whose mean brightness is above this percent will be removed.
	Useful values range from <code>0.8</code> to around <code>0.95</code>.
	<br>Set to <code>0</code> to disable this check.
	</td>
</tr>

<tr><td class="note" colspan="3">Timelapse Settings</td></tr>

<tr><td><span class="shSetting">TIMELAPSE</span></td>
	<td>true</td>
	<td>Build a timelapse video at the end of the night?</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSEWIDTH</span></td>
	<td>0</td>
	<td>Changes the width of the generated timelapse; must be an even number.
	<br><code>0</code> uses the images's full size.
	<br>Large sensor cameras like the RPi HQ often need the timelapse to be shrunk
	in order for timelapses to work (or the individual images need to be shrunk).
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSEHEIGHT</span></td>
	<td>0</td>
	<td>Changes the height of the generated timelapse; must be an even number.
	<br><code>0</code> uses the images's full size.
	<br>If you change the width and height you'll probably want the resulting aspect ratio
	to match the original images.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_BITRATE</span></td>
	<td>5000k</td>
	<td>Bitrate the timelapse video will be created with.
	Higher values produce better quality video but larger files.
	<br>Be sure to include the trailing <code>k</code>.</td>
</tr>
<tr><td><span class="shSetting">FPS</span></td>
	<td>25</td>
	<td>The timelapse video
	<span class="shSetting">F</span>rames
	<span class="shSetting">P</span>er
	<span class="shSetting">S</span>econd.
	<br>Higher numbers produce smoother, but shorter, videos.
	</td>
</tr>
<tr><td><span class="shSetting">VCODEC</span></td>
	<td>libx264</td>
	<td>Encoder used to create the timelapse video.
	Rarely changed.
	</td>
</tr>
<tr><td><span class="shSetting">PIX_FMT</span></td>
	<td>yuv420p</td>
	<td>Pixel format.
	<br>If you don't know what this is, don't change it.
	</td>
</tr>
<tr><td><span class="shSetting">FFLOG</span></td>
	<td>warning</td>
	<td>Level of debugging information output when creating a timelapse.
	Set to <code>info</code> for more output.
	Primarily used for debugging or when tuning the algorithm.
	</td>
</tr>
<tr><td><span class="shSetting">KEEP_SEQUENCE</span></td>
	<td>false</td>
	<td>Keep the sequence of symbolic links created when creating a timelapse?
	<br>Primarily used when debugging.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_EXTRA_PARAMETERS</span></td>
	<td></td>
	<td>Any additional timelapse parameters. Run <code>ffmpeg -?</code> to see the options.</td>
</tr>
<tr><td><span class="shSetting">UPLOAD_VIDEO</span></td>
	<td>false</td>
	<td>Upload the timelapse video to your Allsky Website?
	If not set, the timelapse videos can still be viewed via the
	<span class="WebUIWebPage">Images</span> link on the WebUI.
	<br>Ignored if you you do not have an Allsky Website.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_UPLOAD_THUMBNAIL</span></td>
	<td>true</td>
	<td>Upload the timelapse video's thumbnail to your Allsky Website?
	Many remote servers don't support thumbnail creation so the thumbnail needs to be
	created on the Pi and uploaded.
	<br>Not needed if your only Allsky Website is on your Pi.
	</td>
</tr>

<tr><td class="note" colspan="3">Mini-Timelapse Settings</td></tr>

<tr><td><span class="shSetting">TIMELAPSE_MINI_IMAGES</span></td>
	<td>0</td>
	<td>A "mini-timelapse" only includes the most recent images and is created often.
	It's a good way to see "recent" activity.
	This setting determines the number of images in the mini-timelapse.
	Keep in mind the more images you have the longer it'll take to create the video.
	30 is a good starting point.
	<br><b>Note that each mini-timelapse overwrites the prior one.</b>
	<br>The following settings only apply if this settings is greater than 0.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_FORCE_CREATION</span></td>
	<td>true</td>
	<td>Should a mini-timelapse be created even if
	<span class="shSetting">TIMELAPSE_MINI_IMAGES</span> images
	haven't been taken yet?
	For example, you want 15 images in each mini-timelapse but only 5 have been taken;
	should a mini-timelapse still be created?
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_FREQUENCY</span></td>
	<td>5</td>
	<td>After how many images should the mini-timelapse be created?
	Slower machines and machines with slow networks should use higher numbers.
	3&nbsp;-&nbsp;5 works well on a Pi 4 with 4 GB memory.
	<br>Every <span class="shSetting">TIMELAPSE_MINI_FREQUENCY</span> images a new
	mini-timelapse is created using the last
	<span class="shSetting">TIMELAPSE_MINI_IMAGES</span> images.
	For example, every 5 frames a new mini-timelapse is created using the most recent 15 images.
	<p>
	<blockquote class="warning">
	Be <strong>very</strong> careful when setting the 
	<span class="shSetting">TIMELAPSE_MINI_IMAGES</span> and
	<span class="shSetting">TIMELAPSE_MINI_FREQUENCY</span> settings.
	If either or both numbers are too high,
	or the daytime or nighttime <span class="WebUISetting">Delay</span> is too short,
	there may not be enough time to finish one mini timelapse creation before
	the next one starts.
	If this happens the second one will be aborted and you'll see a System Message in the WebUI
	(you may need to refresh your browser page).
	</blockquote>
	</p>
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_UPLOAD_VIDEO</span></td>
	<td>true</td>
	<td>Like <span class="shSetting">UPLOAD_VIDEO</span> but for mini-timelapses.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_UPLOAD_THUMBNAIL</span></td>
	<td>true</td>
	<td>Like <span class="shSetting">TIMELAPSE_UPLOAD_THUMBNAIL</span> but for mini-timelapses.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_FPS</span></td>
	<td>5</td>
	<td>Like <span class="shSetting">FPS</span> but for mini-timelapses.
	<br>Since mini-timelapses contain a very small number of images,
	this setting should be small to avoid very short videos.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_BITRATE</span></td>
	<td>2000k</td>
	<td>Like <span class="shSetting">TIMELAPSE_BITRATE</span> but for mini-timelapses.
	<br>This is normally smaller than a full timelapse to save on processing time.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_WIDTH</span></td>
	<td>1014</td>
	<td>Like <span class="shSetting">TIMELAPSEWIDTH</span> but for mini-timelapses.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>
<tr><td><span class="shSetting">TIMELAPSE_MINI_HEIGHT</span></td>
	<td>760</td>
	<td>Like <span class="shSetting">TIMELAPSEHEIGHT</span> but for mini-timelapses.
	<br>Must be an even number. The default is just an example.
	</td>
</tr>

<tr><td class="note" colspan="3">Keogram Settings</td></tr>

<tr><td><span class="shSetting">KEOGRAM</span></td>
	<td>true</td>
	<td>Build a keogram image at the end of the night?</td>
</tr>
<tr><td><span class="shSetting">KEOGRAM_EXTRA_PARAMETERS</span></td>
	<td>various</td>
	<td>Additional keogram parameters.
	Execute <code>~/allsky/bin/keogram --help</code> for a list of options.</td>
</tr>
<tr><td><span class="shSetting">UPLOAD_KEOGRAM</span></td>
	<td>false</td>
	<td>Upload the keogram image to your Allsky Website?</td>
</tr>

<tr><td class="note" colspan="3">Startrails Settings</td></tr>

<tr><td><span class="shSetting">STARTRAILS</span></td>
	<td>true</td>
	<td>Build a startrail image at the end of the night?</td>
</tr>
<tr><td><span class="shSetting">BRIGHTNESS_THRESHOLD</span></td>
	<td>0.1</td>
	<td>Average brightness level above which images are discarded (moon, head lights, aurora, etc.).
	If you are only getting very short trails, or none at all, adjust this number.
	<br>Values are 0.0 (pure black, filters out nothing) to 1.0 (pure white, uses every image).
	</td>
</tr>
<tr><td><span class="shSetting">STARTRAILS_EXTRA_PARAMETERS</span></td>
	<td></td>
	<td>Additional startrails parameters.
	Execute <code>~/allsky/bin/startrails --help</code> for a list of options.</td>
</tr>
<tr><td><span class="shSetting">UPLOAD_STARTRAILS</span></td>
	<td>false</td>
	<td>Upload the startrails image to your Allsky Website?</td>
</tr>

<tr><td class="note" colspan="3">Other Settings</td></tr>

<tr><td><span class="shSetting">THUMBNAIL_SIZE_X</span></td>
	<td>100</td>
	<td>Sets the width of thumbnails.</td>
</tr>
<tr><td><span class="shSetting">THUMBNAIL_SIZE_Y</span></td>
	<td>75</td>
	<td>Sets the height of thumbnails.
	<br>These numbers determine the size of the thumbnails in
	<span class="fileName">~/allsky/images</span>
	as well as any thumbnails created by the Allsky Website.
	<blockquote>Although changing these will change the size of the thumbnails,
	no testing has been done to see if there are negative side effects.</blockquote>
	</td>
</tr>

<tr><td><span class="shSetting">DAYS_TO_KEEP</span></td>
	<td>14</td>
	<td>Number of days of images and videos in
	<span class="fileName">~/allsky/images</span> to keep.
	Any directory older than this many days will be deleted at each end of night.
	Set to <code>0</code> to keep ALL days' data;
	you will need to manually manage disk space.</td>
</tr>
<tr><td><span class="shSetting">WEB_DAYS_TO_KEEP</span></td>
	<td>0</td>
	<td>Number of days of web data to keep in
	<span class="fileName">~/allsky/html/allsky</span>.
	Any image, video, or thumbnail older than this many days will be deleted at each end of night.
	<code>0</code> disables the check and keeps ALL days' web data;
	you will need to manually manage disk space.
	<blockquote>This only applies to Allsky Websites on the Pi.</blockquote>
	</td>
</tr>

<tr><td class="note" colspan="3">Do not change anything lower in the file</td></tr>
</tbody>
</table>
</details>


<!--
<h2>[MORE TO COME ...]</h2>
<details><summary></summary>
<br>

These color balances work for some people on Buster (raspistill):
<ul>
<li>RPi HQ Red: 3.24, Blue: 1.47
<li>RPi HQ no AWB, Red: 2.8, Blue: 2.2, Saturation: 40
</ul>

Luc Bodson uses these with RPi HQ and libcamera:
<ul>
<li>IR filter in place: Saturation: 1.4, AWB, Red: 3.47, Blue: 1.6
<li>IR filter removed: Saturation: 0.5, no AWB, Red: 1.0, Blue 1.6
</ul>
-->
</details>

</div><!-- Layout-main -->
</div><!-- Layout -->
</body>
</html>
<script> includeHTML(); </script>
