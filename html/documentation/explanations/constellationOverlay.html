<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="../js/documentation.js" type="application/javascript"></script>
	<link href="../css/light.css" rel="stylesheet">
	<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<style>
		#pageTitle::before {
			content: "Constellation Overlay";
		} 
	</style>
	<link href="../css/documentation.css" rel="stylesheet">
	<link href="../documentation-favicon.ico" rel="shortcut icon" type="image/png">
	<title>Constellation Overlay</title>
</head>
<body>
<div w3-include-html="/documentation/pageHeader.html" id="pageHeader"></div>
<div class="Layout">
<div class="Layout-sidebar" w3-include-html="/documentation/sidebar.html" id="sidebar"></div>
<div class="Layout-main markdown-body" id="mainContents">

<p>
The Allsky Website allows an overlay to appear over the image which can contain constellations,
stars, objects, and other items.
This overlay is called the "constellation overlay" and should not be confused with
"image overlays" which contain text and other items that are embedded in captured images.
You can view the constellation overlay by clicking on the
constellation icon on the left side of the Website page (the icon looks like Cassiopeia).
<blockquote>
By default the constellation overlay icon doesn't appear since many people never align
their overlay with the stars in their image,
thereby making their overlay useless and misleading to others who might click on it.
<br>
You should only make the icon appear if you are going to follow the instructions
below to align the overlay.
</blockquote>
</p>
To make the overlay icon appear:
<ul class="minimalPadding">
	<li>In the WebUI, click on the <b>Editor</b> link.
	<li>On the drop-down at the bottom of the page,
		click on the <span class="fileName">configuration.json</span> file for your local or remote Website.
	<li>In the <span class="editorSetting">homePage</span> section of the file,
		go to the <span class="editorSetting">leftSidebar</span> setting.
	<li>The first group of sub-settings should be for the constellation overlay.
	<li>Set the <span class="editorSetting">display</span> setting to
		<span class="editorBool">true</span>.
	<li>Save the file.
	<li>Refresh your browser.
</ul>
<p>
For more information on this, and other Website settings, visit the
<a allsky="true" href="/documentation/settings/allskyWebsite.html">Allsky Website Settings</a>
page.
</p>

<h2>Adjusting image size</h2>
<p>
The default maximum size of the image that's displayed on the Website is
960 pixels wide by 720 pixels high.
If your monitor is very small or can support a larger resolution,
you may wish to change the default size by doing the following:
<ul>
	<li>In the WebUI's <b>Editor</b> page, edit the
		<span class="editorSetting">imageHeight</span> setting in the
		<span class="fileName">configuration.json</span> file.
		The image's width will be automatically determined.
	<li>Refresh your browser.
	<li>If you set
		<span class="editorShell">RESIZE_UPLOADS</span><span class="editorSpecial">=</span><span class="editorString">"true"</span>
		in <span class="fileName">config.sh</span> that size should be the same or greater than the size of the
		<span class="editorSetting">imageHeight</span> value.
</ul>

<h2>Aligning the overlay</h2>
<p>
<blockquote>
Getting the overlay placed over the sky image correctly
is a trial-and-error effort that takes time.
</blockquote>
Most allsky cameras produce rectangular pictures,
but the portion of the picture with your allsky image is often round,
surrounded by black.
Further, the round portion may not be centered exactly in the picture,
although it's usually close.
<br>
When aligning the overlay keep in mind the difference between the rectangular,
full-size picture and the (usually) round portion of that picture that contains the allsky image.
</p>
<p>
In the steps below you'll be editing the <span class="fileName">configuration.json</span> file
using the WebUI's <b>Editor</b> page.
</p>
<ul class="minimalPadding">
	<li>Change the
		<span class="editorSetting">width</span> and
		<span class="editorSetting">height</span> settings.
		These should be roughly the size of the circular portion of the image your lens produces,
		not the whole image.
		At night it can be difficult to determine where the border of the lens image is,
		so this step may be easier during the day.
	<li>Tweak <span class="editorSetting">imageHeight</span> if needed.
		If it's not large enough, the overlay will be cut off at the bottom.
	<li>Center the overlay by changing
		<span class="editorSetting">overlayOffsetLeft</span> and
		<span class="editorSetting">overlayOffsetTop</span>.
	<li>Make the overlay the correct size:
	<ul>
		<li><span style="color: red">THE FOLLOWING HASN'T BEEN TESTED YET:</span>
		<li>Determine the center of the lens image (not the center of the whole image).
		<li>Remember where the center is - possibly measure it
			from the top and side of your monitor.
		<li>Set <span class="editorSetting">keyboard</span>
			to <span class="editorBool">true</span>.
		<li>Refresh your browser and display the overlay.
		<li>With the mouse over the overlay, press <code>z</code> to toggle the
			gridlines so you can easily see where the center of the overlay is.
		<li>Modify
			<span class="editorSetting">overlayOffsetLeft</span> and
			<span class="editorSetting">overlayOffsetTop</span>
			to get center of the overlay to match the center of the lens image.
		<li>Modify
			<span class="editorSetting">overlayWidth</span> and
			<span class="editorSetting">overlayHeight</span>
			so the overlay is the correct size.
			You may need to re-center the overlay as you do this.
	</ul>
	<li>Rotate the overlay to match the stars.
	Increasing the <span class="editorSetting">az</span> setting rotates the overlay clockwise.
</ul>

<h3>Tips</h3>
<p>
The following items can be done while aligning the overlay,
and undone when finished.
</p>
<ul>
	<li>Set the <span class="editorSetting">opacity</span> to
		<span class="editorNum">1.0</span> (pure white)
		to make it easier to see the overlay.
	<li>Optionally set <span class="editorSetting">showOverlayAtStartup</span> to
		<span class="editorBool">true</span>
		to eliminate the need to manually display the overlay every time
		you refresh the browser.
	<li>Set
		<span class="editorSetting">constellationlabels</span>,
		<span class="editorSetting">showgalaxy</span>,
		and <span class="editorSetting">gridlines_eq</span>
		to <span class="editorBool">false</span>
		so it's easier to compare the overlay with the actual sky.
		Keeping <span class="editorSetting">constellations</span>
		on can help identify stars, though.
	<li>Setting <span class="editorSetting">mouse</span> can be useful to allow you
		to rotate the sky overlay with the mouse.
		This will give an indication if the overlay size and position are correct,
		and you just need to modify <span class="editorSetting">az</span>.
	<li>Have multiple windows open:
		<ol>
			<li>One editing <span class="fileName">configuration.json</span>.
			<li>A big one that shows the full image and overlay.
		</ol>
</ul>


</div><!-- Layout-main -->
</div><!-- Layout -->
</body>
</html>
<script> includeHTML(); </script>

