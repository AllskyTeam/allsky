<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="../js/documentation.js" type="application/javascript"></script>
	<link href="../css/light.css" rel="stylesheet">
	<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<style>
		#pageTitle::before {
			content: "Troubleshooting Camera Not Found Messages";
		} 
	</style>
	<link href="../css/documentation.css" rel="stylesheet">
	<link href="../documentation-favicon.ico" rel="shortcut icon" type="image/png">
	<title>Camera Not Found</title>
</head>
<body>
<div w3-include-html="/documentation/pageHeader.html" id="pageHeader"></div>
<div class="Layout">
<div class="Layout-sidebar" w3-include-html="/documentation/sidebar.html" id="sidebar"></div>
<div class="Layout-main markdown-body" id="mainContents">

<p>
This page describes what to do if you get a message saying
your camera is not found or is not working.
</p>

<h1>RPi HQ Camera</h1>
<details><summary></summary>
<p>
On October 31, 2021 a new version of the Raspberry Pi operating system,
called "Bullseye" was released (the prior version was called "Buster").
One of the changes in Bullseye was to replace the RPi HQ camera software
that Allsky uses with new software.
Unfortunately this broke Allsky.
If you downloaded the Raspberry Pi operating system on October 31 or after, you have Bullseye.
<b>The current version of Allsky works on both Buster and Bullseye.</b>
</p>
<p>
Some of the settings need to be changed when going from Buster to  Bullseye.
For example, the <span class="WebUISetting">Brightness</span> setting on Buster goes from
<span class="WebUIValue">0</span> to <span class="WebUIValue">100</span>
but on Bullseye goes from
<span class="WebUIValue">-100</span> to <span class="WebUIValue">100</span>.
Hovering over a value will display the minimum, maximum, and default values for that setting.
</p>

<blockquote>
It is <b>strongly</b> recommended that you use the Bullseye operating system if
you have an RPi HQ camera.
All new features are being added to Bullseye only,
so users of Buster won't have new features like sensor temperature.
</blockquote>

<h2>Check for correct camera driver</h2>
Make sure the correct driver for the camera is installed.
On Bullseye, execute
<pre>
libcamera-hello
</pre>
If you get an error like this:
<pre>
terminate called after throwing an instance of 'std::runtime_error'
  what():  failed to import fd 22
</pre>
then run <code>sudo raspi-config</code>, navigate to
<code>Advanced Options</code> and enable <code>Glamor</code> graphic acceleration.
Then reboot your Pi.
</p>
<p>
Try <code>libcamera-hello</code> again.
You should get a <b>Hello world!</b> message in a new window.
</p>

<h2>Other things to check</h2>
<ul>
<li>If this is a new RPi camera, make sure the ribbon cable is in correctly.
	This is an easy mistake to make since the cable will go in backwards.
	See the camera documentation for details on how to correctly plug the camera in.
<li>If you have access to another Pi, try plugging the camera in it to see if it works.
</ul>
</details>


<h1>ZWO Cameras</h1>
<details><summary></summary>
<p>
If you have a fairly new ZWO camera model,
the ZWO software that's included with Allsky may not yet support it.
If your camera still isn't found after checking the items below, execute:
<pre>
grep "ZWO SDK" /var/log/allsky.log"
</pre>
and include the results in a new
<a href="https://github.com/thomasjacquin/allsky/issues">Issue</a>,
as well as your camera model.
</p>
<p>
Other things to check:
<ul>
<li>Is the camera plugged in to a USB port?
	Try plugging it into a different port.
<li>Is the camera plugged in to a USB hub?
	Make sure the hub is plugged into the Pi.
	Try plugging the hub into a different port on the Pi.
	Temporarily bypass the hub.
<li>If you have access to another Pi, or a PC,
	plug the camera into it to see if it works.
</ul>
</p>
</details>

</div><!-- Layout-main -->
</div><!-- Layout -->
</body>
</html>
<script> includeHTML(); </script>

